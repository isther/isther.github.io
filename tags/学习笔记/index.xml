<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>å­¦ä¹ ç¬”è®° on Ther&#39;s Blog ğŸ‘‹</title>
    <link>https://www.niuwx.cn/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
    <description>Recent content in å­¦ä¹ ç¬”è®° on Ther&#39;s Blog ğŸ‘‹</description>
    <generator>Hugo -- gohugo.io</generator><atom:link href="https://www.niuwx.cn/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Golangå­¦ä¹ ç¬”è®°</title>
      <link>https://www.niuwx.cn/posts/golang/golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/golang%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
      <description>Golangå­¦ä¹ ç¬”è®°ç›®å½•ï¼Œè®°å½•ç‚¹æ»´ã€‚</description>
      <content:encoded><![CDATA[<p>è¿™é‡Œå°†è®°å½•Golangå­¦ä¹ çš„ç¬”è®°ã€‚</p>
<h3 id="goåŸºç¡€">GoåŸºç¡€</h3>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/">Goè¯­è¨€åŸºç¡€ä¹‹å˜é‡ä¸å¸¸é‡</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">Goè¯­è¨€åŸºç¡€ä¹‹åŸºæœ¬æ•°æ®ç±»å‹</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6/">Goè¯­è¨€åŸºç¡€ä¹‹è¿ç®—ç¬¦</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">Goè¯­è¨€åŸºç¡€ä¹‹æµç¨‹æ§åˆ¶</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%95%B0%E7%BB%84/">Goè¯­è¨€åŸºç¡€ä¹‹æ•°ç»„</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%88%87%E7%89%87/">Goè¯­è¨€åŸºç¡€ä¹‹åˆ‡ç‰‡</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8Bmap/">Goè¯­è¨€åŸºç¡€ä¹‹map</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%87%BD%E6%95%B0/">Goè¯­è¨€åŸºç¡€ä¹‹å‡½æ•°</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%8C%87%E9%92%88/">Goè¯­è¨€åŸºç¡€ä¹‹æŒ‡é’ˆ</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%88%E4%B8%80%EF%BC%89/">Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“ï¼ˆä¸€ï¼‰</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%88%E4%BA%8C%EF%BC%89/">Goè¯­è¨€åŸºç¡€ä¹‹ç»“æ„ä½“ï¼ˆäºŒï¼‰</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%8E%A5%E5%8F%A3/">Goè¯­è¨€åŸºç¡€ä¹‹æ¥å£</a></p>
<p><a href="https://www.niuwx.cn/posts/golang/Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B9%B6%E5%8F%91/">Goè¯­è¨€åŸºç¡€ä¹‹å¹¶å‘</a></p>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹map</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8Bmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8Bmap/</guid>
      <description>Map</description>
      <content:encoded><![CDATA[<p>Goè¯­è¨€ä¸­æä¾›çš„æ˜ å°„å…³ç³»å®¹å™¨ä¸º<code>map</code>ï¼Œå…¶å†…éƒ¨ä½¿ç”¨<code>æ•£åˆ—è¡¨ï¼ˆhashï¼‰</code>å®ç°ã€‚</p>
<h1 id="map">map</h1>
<p>mapæ˜¯ä¸€ç§æ— åºçš„åŸºäº<code>key-value</code>çš„æ•°æ®ç»“æ„ï¼ŒGoè¯­è¨€ä¸­çš„mapæ˜¯å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨ã€‚</p>
<h2 id="mapå®šä¹‰">mapå®šä¹‰</h2>
<p>Goè¯­è¨€ä¸­ <code>map</code>çš„å®šä¹‰è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">KeyType</span>]<span style="color:#a6e22e">ValueType</span>
</code></pre></div><p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>KeyType:è¡¨ç¤ºé”®çš„ç±»å‹ã€‚</li>
<li>ValueType:è¡¨ç¤ºé”®å¯¹åº”çš„å€¼çš„ç±»å‹ã€‚</li>
</ul>
<p>mapç±»å‹çš„å˜é‡é»˜è®¤åˆå§‹å€¼ä¸ºnilï¼Œéœ€è¦ä½¿ç”¨make()å‡½æ•°æ¥åˆ†é…å†…å­˜ã€‚è¯­æ³•ä¸ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">make(<span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">KeyType</span>]<span style="color:#a6e22e">ValueType</span>, [<span style="color:#a6e22e">cap</span>])
</code></pre></div><p>å…¶ä¸­capè¡¨ç¤ºmapçš„å®¹é‡ï¼Œè¯¥å‚æ•°è™½ç„¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åº”è¯¥åœ¨åˆå§‹åŒ–mapçš„æ—¶å€™å°±ä¸ºå…¶æŒ‡å®šä¸€ä¸ªåˆé€‚çš„å®¹é‡ã€‚</p>
<h2 id="mapåŸºæœ¬ä½¿ç”¨">mapåŸºæœ¬ä½¿ç”¨</h2>
<p>mapä¸­çš„æ•°æ®éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œmapçš„åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">scoreMap</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">8</span>)
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>] = <span style="color:#ae81ff">90</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">scoreMap</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>])
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type of a:%T\n&#34;</span>, <span style="color:#a6e22e">scoreMap</span>)
}
</code></pre></div><p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">map<span style="color:#f92672">[</span>å°æ˜:100 å¼ ä¸‰:90<span style="color:#f92672">]</span>
<span style="color:#ae81ff">100</span>
type of a:map<span style="color:#f92672">[</span>string<span style="color:#f92672">]</span>int
</code></pre></div><p>mapä¹Ÿæ”¯æŒåœ¨å£°æ˜çš„æ—¶å€™å¡«å……å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">userInfo</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>{
		<span style="color:#e6db74">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;æ²™æ²³å°ç‹å­&#34;</span>,
		<span style="color:#e6db74">&#34;password&#34;</span>: <span style="color:#e6db74">&#34;123456&#34;</span>,
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">userInfo</span>) <span style="color:#75715e">//
</span><span style="color:#75715e"></span>}
</code></pre></div><h2 id="åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨">åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦å­˜åœ¨</h2>
<p>Goè¯­è¨€ä¸­æœ‰ä¸ªåˆ¤æ–­mapä¸­é”®æ˜¯å¦å­˜åœ¨çš„ç‰¹æ®Šå†™æ³•ï¼Œæ ¼å¼å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">key</span>]
</code></pre></div><p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">scoreMap</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>] = <span style="color:#ae81ff">90</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#75715e">// å¦‚æœkeyå­˜åœ¨okä¸ºtrue,vä¸ºå¯¹åº”çš„å€¼ï¼›ä¸å­˜åœ¨okä¸ºfalse,vä¸ºå€¼ç±»å‹çš„é›¶å€¼
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>]
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">ok</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
	} <span style="color:#66d9ef">else</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;æŸ¥æ— æ­¤äºº&#34;</span>)
	}
}
</code></pre></div><h2 id="mapçš„éå†">mapçš„éå†</h2>
<p>Goè¯­è¨€ä¸­ä½¿ç”¨<code>for range</code>éå†mapã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">scoreMap</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>] = <span style="color:#ae81ff">90</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¨œæ‰&#34;</span>] = <span style="color:#ae81ff">60</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">scoreMap</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span>)
	}
}
</code></pre></div><p>ä½†æˆ‘ä»¬åªæƒ³éå†keyçš„æ—¶å€™ï¼Œå¯ä»¥æŒ‰ä¸‹é¢çš„å†™æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">scoreMap</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>] = <span style="color:#ae81ff">90</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¨œæ‰&#34;</span>] = <span style="color:#ae81ff">60</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">scoreMap</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">k</span>)
	}
}
</code></pre></div><p><strong>æ³¨æ„ï¼š</strong> éå†mapæ—¶çš„å…ƒç´ é¡ºåºä¸æ·»åŠ é”®å€¼å¯¹çš„é¡ºåºæ— å…³ã€‚</p>
<h2 id="ä½¿ç”¨deleteå‡½æ•°åˆ é™¤é”®å€¼å¯¹">ä½¿ç”¨delete()å‡½æ•°åˆ é™¤é”®å€¼å¯¹</h2>
<p>ä½¿ç”¨<code>delete()</code>å†…å»ºå‡½æ•°ä»mapä¸­åˆ é™¤ä¸€ç»„é”®å€¼å¯¹ï¼Œ<code>delete()</code>å‡½æ•°çš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">delete(<span style="color:#66d9ef">map</span>, <span style="color:#a6e22e">key</span>)
</code></pre></div><p>å…¶ä¸­ï¼Œ</p>
<ul>
<li>map:è¡¨ç¤ºè¦åˆ é™¤é”®å€¼å¯¹çš„map</li>
<li>key:è¡¨ç¤ºè¦åˆ é™¤çš„é”®å€¼å¯¹çš„é”®</li>
</ul>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>(){
	<span style="color:#a6e22e">scoreMap</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¼ ä¸‰&#34;</span>] = <span style="color:#ae81ff">90</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å°æ˜&#34;</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">scoreMap</span>[<span style="color:#e6db74">&#34;å¨œæ‰&#34;</span>] = <span style="color:#ae81ff">60</span>
	delete(<span style="color:#a6e22e">scoreMap</span>, <span style="color:#e6db74">&#34;å°æ˜&#34;</span>)<span style="color:#75715e">//å°†å°æ˜:100ä»mapä¸­åˆ é™¤
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>,<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">scoreMap</span>{
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span>)
	}
}
</code></pre></div><h2 id="æŒ‰ç…§æŒ‡å®šé¡ºåºéå†map">æŒ‰ç…§æŒ‡å®šé¡ºåºéå†map</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">rand</span>.<span style="color:#a6e22e">Seed</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">UnixNano</span>()) <span style="color:#75715e">//åˆå§‹åŒ–éšæœºæ•°ç§å­
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">scoreMap</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">200</span>)

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">100</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;stu%02d&#34;</span>, <span style="color:#a6e22e">i</span>) <span style="color:#75715e">//ç”Ÿæˆstuå¼€å¤´çš„å­—ç¬¦ä¸²
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rand</span>.<span style="color:#a6e22e">Intn</span>(<span style="color:#ae81ff">100</span>)          <span style="color:#75715e">//ç”Ÿæˆ0~99çš„éšæœºæ•´æ•°
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">scoreMap</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">value</span>
	}
	<span style="color:#75715e">//å–å‡ºmapä¸­çš„æ‰€æœ‰keyå­˜å…¥åˆ‡ç‰‡keys
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">keys</span> = make([]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">200</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">scoreMap</span> {
		<span style="color:#a6e22e">keys</span> = append(<span style="color:#a6e22e">keys</span>, <span style="color:#a6e22e">key</span>)
	}
	<span style="color:#75715e">//å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">sort</span>.<span style="color:#a6e22e">Strings</span>(<span style="color:#a6e22e">keys</span>)
	<span style="color:#75715e">//æŒ‰ç…§æ’åºåçš„keyéå†map
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">keys</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">scoreMap</span>[<span style="color:#a6e22e">key</span>])
	}
}
</code></pre></div><h2 id="å…ƒç´ ä¸ºmapç±»å‹çš„åˆ‡ç‰‡">å…ƒç´ ä¸ºmapç±»å‹çš„åˆ‡ç‰‡</h2>
<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†åˆ‡ç‰‡ä¸­çš„å…ƒç´ ä¸ºmapç±»å‹æ—¶çš„æ“ä½œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">mapSlice</span> = make([]<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">3</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">mapSlice</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;index:%d value:%v\n&#34;</span>, <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span>)
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;after init&#34;</span>)
	<span style="color:#75715e">// å¯¹åˆ‡ç‰‡ä¸­çš„mapå…ƒç´ è¿›è¡Œåˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">mapSlice</span>[<span style="color:#ae81ff">0</span>] = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">10</span>)
	<span style="color:#a6e22e">mapSlice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#34;name&#34;</span>] = <span style="color:#e6db74">&#34;å°ç‹å­&#34;</span>
	<span style="color:#a6e22e">mapSlice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#34;password&#34;</span>] = <span style="color:#e6db74">&#34;123456&#34;</span>
	<span style="color:#a6e22e">mapSlice</span>[<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#34;address&#34;</span>] = <span style="color:#e6db74">&#34;æ²™æ²³&#34;</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">mapSlice</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;index:%d value:%v\n&#34;</span>, <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span>)
	}
}
</code></pre></div><h2 id="å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„map">å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„map</h2>
<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†mapä¸­å€¼ä¸ºåˆ‡ç‰‡ç±»å‹çš„æ“ä½œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">sliceMap</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>][]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">3</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sliceMap</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;after init&#34;</span>)
	<span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;ä¸­å›½&#34;</span>
	<span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sliceMap</span>[<span style="color:#a6e22e">key</span>]
	<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
		<span style="color:#a6e22e">value</span> = make([]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>)
	}
	<span style="color:#a6e22e">value</span> = append(<span style="color:#a6e22e">value</span>, <span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>)
	<span style="color:#a6e22e">sliceMap</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">value</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sliceMap</span>)
}
</code></pre></div>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹åˆ‡ç‰‡</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%88%87%E7%89%87/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%88%87%E7%89%87/</guid>
      <description>Goåˆ‡ç‰‡</description>
      <content:encoded><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»Goè¯­è¨€ä¸­åˆ‡ç‰‡ï¼ˆsliceï¼‰åŠå®ƒçš„åŸºæœ¬ä½¿ç”¨ã€‚</p>
<h2 id="å¼•å…¥">å¼•å…¥</h2>
<p>å› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„å¹¶ä¸”æ•°ç»„é•¿åº¦å±äºç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ•°ç»„æœ‰å¾ˆå¤šçš„å±€é™æ€§ã€‚ ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">arraySum</span>(<span style="color:#a6e22e">x</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span>{
    <span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">x</span>{
        <span style="color:#a6e22e">sum</span> = <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">v</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
}
</code></pre></div><p>è¿™ä¸ªæ±‚å’Œå‡½æ•°åªèƒ½æ¥å—<code>[3]int</code>ç±»å‹ï¼Œå…¶ä»–çš„éƒ½ä¸æ”¯æŒã€‚ å†æ¯”å¦‚ï¼Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>}
</code></pre></div><p>æ•°ç»„aä¸­å·²ç»æœ‰ä¸‰ä¸ªå…ƒç´ äº†ï¼Œæˆ‘ä»¬ä¸èƒ½å†ç»§ç»­å¾€æ•°ç»„aä¸­æ·»åŠ æ–°å…ƒç´ äº†ï¼Œè¿™æ ·å°±éš¾å—çš„ä¸€æ‰¹ã€‚è€Œåˆ‡ç‰‡å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜</p>
<h2 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h2>
<p>åˆ‡ç‰‡ï¼ˆSliceï¼‰æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒç±»å‹å…ƒç´ çš„å¯å˜é•¿åº¦çš„åºåˆ—ã€‚å®ƒæ˜¯åŸºäºæ•°ç»„ç±»å‹åšçš„ä¸€å±‚å°è£…ã€‚å®ƒéå¸¸çµæ´»ï¼Œæ”¯æŒè‡ªåŠ¨æ‰©å®¹ã€‚</p>
<h3 id="åˆ‡ç‰‡çš„å®šä¹‰">åˆ‡ç‰‡çš„å®šä¹‰</h3>
<p>å£°æ˜åˆ‡ç‰‡ç±»å‹çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> []<span style="color:#a6e22e">T</span>
</code></pre></div><ul>
<li>name:è¡¨ç¤ºå˜é‡å</li>
<li>T:è¡¨ç¤ºåˆ‡ç‰‡ä¸­çš„å…ƒç´ ç±»å‹</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// å£°æ˜åˆ‡ç‰‡ç±»å‹
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> []<span style="color:#66d9ef">string</span>              <span style="color:#75715e">//å£°æ˜ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> = []<span style="color:#66d9ef">int</span>{}             <span style="color:#75715e">//å£°æ˜ä¸€ä¸ªæ•´å‹åˆ‡ç‰‡å¹¶åˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c</span> = []<span style="color:#66d9ef">bool</span>{<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>} <span style="color:#75715e">//å£°æ˜ä¸€ä¸ªå¸ƒå°”åˆ‡ç‰‡å¹¶åˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">d</span> = []<span style="color:#66d9ef">bool</span>{<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>} <span style="color:#75715e">//å£°æ˜ä¸€ä¸ªå¸ƒå°”åˆ‡ç‰‡å¹¶åˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>)              <span style="color:#75715e">//[]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>)              <span style="color:#75715e">//[]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span>)              <span style="color:#75715e">//[false true]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)       <span style="color:#75715e">//true
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)       <span style="color:#75715e">//false
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span>)       <span style="color:#75715e">//false
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// fmt.Println(c == d)   //åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸æ”¯æŒç›´æ¥æ¯”è¾ƒï¼Œåªèƒ½å’Œnilæ¯”è¾ƒ
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡">åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡</h3>
<p>åˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å†…ç½®çš„<code>len()</code>å‡½æ•°æ±‚é•¿åº¦ï¼Œä½¿ç”¨å†…ç½®çš„<code>cap()</code>å‡½æ•°æ±‚åˆ‡ç‰‡çš„å®¹é‡ã€‚</p>
<h3 id="åˆ‡ç‰‡è¡¨è¾¾å¼">åˆ‡ç‰‡è¡¨è¾¾å¼</h3>
<h4 id="ç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼">ç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼</h4>
<p>åˆ‡ç‰‡çš„åº•å±‚å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŸºäºæ•°ç»„é€šè¿‡åˆ‡ç‰‡è¡¨è¾¾å¼å¾—åˆ°åˆ‡ç‰‡ã€‚ åˆ‡ç‰‡è¡¨è¾¾å¼ä¸­çš„<code>low</code>å’Œ<code>high</code>è¡¨ç¤ºä¸€ä¸ªç´¢å¼•èŒƒå›´ï¼ˆå·¦åŒ…å«ï¼Œå³ä¸åŒ…å«ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢ä»£ç ä¸­ä»æ•°ç»„aä¸­é€‰å‡º<code>1&lt;=ç´¢å¼•å€¼&lt;4</code>çš„å…ƒç´ ç»„æˆåˆ‡ç‰‡sï¼Œå¾—åˆ°çš„åˆ‡ç‰‡<code>é•¿åº¦=high-low</code>ï¼Œå®¹é‡ç­‰äºå¾—åˆ°çš„åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„çš„å®¹é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]  <span style="color:#75715e">// s := a[low:high]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s:%v len(s):%v cap(s):%v\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
}
</code></pre></div><p>è¾“å…¥ç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">s:<span style="color:#f92672">[</span><span style="color:#ae81ff">2</span> 3<span style="color:#f92672">]</span> len<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:2 cap<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:4
</code></pre></div><p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¯ä»¥çœç•¥åˆ‡ç‰‡è¡¨è¾¾å¼ä¸­çš„ä»»ä½•ç´¢å¼•ã€‚çœç•¥äº†<code>low</code>åˆ™é»˜è®¤ä¸º0ï¼›çœç•¥äº†<code>high</code>åˆ™é»˜è®¤ä¸ºåˆ‡ç‰‡æ“ä½œæ•°çš„é•¿åº¦:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">2</span>:]  <span style="color:#75715e">// ç­‰åŒäº a[2:len(a)]
</span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span>[:<span style="color:#ae81ff">3</span>]  <span style="color:#75715e">// ç­‰åŒäº a[0:3]
</span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span>[:]   <span style="color:#75715e">// ç­‰åŒäº a[0:len(a)]
</span></code></pre></div><p>{% span red, æ³¨æ„ï¼š %}</p>
<p>å¯¹äºæ•°ç»„æˆ–å­—ç¬¦ä¸²ï¼Œå¦‚æœ<code>0 &lt;= low &lt;= high &lt;= len(a)</code>ï¼Œåˆ™ç´¢å¼•åˆæ³•ï¼Œå¦åˆ™å°±ä¼šç´¢å¼•è¶Šç•Œï¼ˆout of rangeï¼‰ã€‚</p>
<p>å¯¹åˆ‡ç‰‡å†æ‰§è¡Œåˆ‡ç‰‡è¡¨è¾¾å¼æ—¶ï¼ˆåˆ‡ç‰‡å†åˆ‡ç‰‡ï¼‰ï¼Œ<code>high</code>çš„ä¸Šé™è¾¹ç•Œæ˜¯åˆ‡ç‰‡çš„å®¹é‡<code>cap(a)</code>ï¼Œè€Œä¸æ˜¯é•¿åº¦ã€‚<strong>å¸¸é‡ç´¢å¼•</strong>å¿…é¡»æ˜¯éè´Ÿçš„ï¼Œå¹¶ä¸”å¯ä»¥ç”¨intç±»å‹çš„å€¼è¡¨ç¤º;å¯¹äºæ•°ç»„æˆ–å¸¸é‡å­—ç¬¦ä¸²ï¼Œå¸¸é‡ç´¢å¼•ä¹Ÿå¿…é¡»åœ¨æœ‰æ•ˆèŒƒå›´å†…ã€‚å¦‚æœ<code>low</code>å’Œ<code>high</code>ä¸¤ä¸ªæŒ‡æ ‡éƒ½æ˜¯å¸¸æ•°ï¼Œå®ƒä»¬å¿…é¡»æ»¡è¶³<code>low &lt;= high</code>ã€‚å¦‚æœç´¢å¼•åœ¨è¿è¡Œæ—¶è¶…å‡ºèŒƒå›´ï¼Œå°±ä¼šå‘ç”Ÿè¿è¡Œæ—¶<code>panic</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]  <span style="color:#75715e">// s := a[low:high]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s:%v len(s):%v cap(s):%v\n&#34;</span>, <span style="color:#a6e22e">s</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>))
	<span style="color:#a6e22e">s2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">4</span>]  <span style="color:#75715e">// ç´¢å¼•çš„ä¸Šé™æ˜¯cap(s)è€Œä¸æ˜¯len(s)
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;s2:%v len(s2):%v cap(s2):%v\n&#34;</span>, <span style="color:#a6e22e">s2</span>, len(<span style="color:#a6e22e">s2</span>), cap(<span style="color:#a6e22e">s2</span>))
}
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">s:<span style="color:#f92672">[</span><span style="color:#ae81ff">2</span> 3<span style="color:#f92672">]</span> len<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:2 cap<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>:4
s2:<span style="color:#f92672">[</span>5<span style="color:#f92672">]</span> len<span style="color:#f92672">(</span>s2<span style="color:#f92672">)</span>:1 cap<span style="color:#f92672">(</span>s2<span style="color:#f92672">)</span>:1
</code></pre></div><h4 id="å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼">å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼</h4>
<p>å¯¹äºæ•°ç»„ï¼ŒæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œæˆ–åˆ‡ç‰‡a(<strong>æ³¨æ„ä¸èƒ½æ˜¯å­—ç¬¦ä¸²</strong>)æ”¯æŒå®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">low</span> : <span style="color:#a6e22e">high</span> : <span style="color:#a6e22e">max</span>]
</code></pre></div><p>ä¸Šé¢çš„ä»£ç ä¼šæ„é€ ä¸ç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼<code>a[low: high]</code>ç›¸åŒç±»å‹ã€ç›¸åŒé•¿åº¦å’Œå…ƒç´ çš„åˆ‡ç‰‡ã€‚å¦å¤–ï¼Œå®ƒä¼šå°†å¾—åˆ°çš„ç»“æœåˆ‡ç‰‡çš„å®¹é‡è®¾ç½®ä¸º<code>max-low</code>ã€‚åœ¨å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼ä¸­åªæœ‰ç¬¬ä¸€ä¸ªç´¢å¼•å€¼ï¼ˆlowï¼‰å¯ä»¥çœç•¥ï¼›å®ƒé»˜è®¤ä¸º0ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">5</span>]
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;t:%v len(t):%v cap(t):%v\n&#34;</span>, <span style="color:#a6e22e">t</span>, len(<span style="color:#a6e22e">t</span>), cap(<span style="color:#a6e22e">t</span>))
}
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">t:<span style="color:#f92672">[</span><span style="color:#ae81ff">2</span> 3<span style="color:#f92672">]</span> len<span style="color:#f92672">(</span>t<span style="color:#f92672">)</span>:2 cap<span style="color:#f92672">(</span>t<span style="color:#f92672">)</span>:4
</code></pre></div><p>å®Œæ•´åˆ‡ç‰‡è¡¨è¾¾å¼éœ€è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯<code>0 &lt;= low &lt;= high &lt;= max &lt;= cap(a)</code>ï¼Œå…¶ä»–æ¡ä»¶å’Œç®€å•åˆ‡ç‰‡è¡¨è¾¾å¼ç›¸åŒã€‚</p>
<h3 id="ä½¿ç”¨makeå‡½æ•°æ„é€ åˆ‡ç‰‡">ä½¿ç”¨make()å‡½æ•°æ„é€ åˆ‡ç‰‡</h3>
<p>æˆ‘ä»¬ä¸Šé¢éƒ½æ˜¯åŸºäºæ•°ç»„æ¥åˆ›å»ºçš„åˆ‡ç‰‡ï¼Œå¦‚æœéœ€è¦åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å†…ç½®çš„<code>make()</code>å‡½æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">make<span style="color:#f92672">([]</span>T, size, cap<span style="color:#f92672">)</span>
</code></pre></div><p>å…¶ä¸­ï¼š</p>
<ul>
<li>T:åˆ‡ç‰‡çš„å…ƒç´ ç±»å‹</li>
<li>size:åˆ‡ç‰‡ä¸­å…ƒç´ çš„æ•°é‡</li>
<li>cap:åˆ‡ç‰‡çš„å®¹é‡</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>)      <span style="color:#75715e">//[0 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(len(<span style="color:#a6e22e">a</span>)) <span style="color:#75715e">//2
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(cap(<span style="color:#a6e22e">a</span>)) <span style="color:#75715e">//10
</span><span style="color:#75715e"></span>}
</code></pre></div><p>ä¸Šé¢ä»£ç ä¸­<code>a</code>çš„å†…éƒ¨å­˜å‚¨ç©ºé—´å·²ç»åˆ†é…äº†10ä¸ªï¼Œä½†å®é™…ä¸Šåªç”¨äº†2ä¸ªã€‚ å®¹é‡å¹¶ä¸ä¼šå½±å“å½“å‰å…ƒç´ çš„ä¸ªæ•°ï¼Œæ‰€ä»¥<code>len(a)</code>è¿”å›2ï¼Œ<code>cap(a)</code>åˆ™è¿”å›è¯¥åˆ‡ç‰‡çš„å®¹é‡ã€‚</p>
<h3 id="åˆ‡ç‰‡çš„æœ¬è´¨">åˆ‡ç‰‡çš„æœ¬è´¨</h3>
<p>åˆ‡ç‰‡çš„æœ¬è´¨å°±æ˜¯å¯¹åº•å±‚æ•°ç»„çš„å°è£…ï¼Œå®ƒåŒ…å«äº†ä¸‰ä¸ªä¿¡æ¯ï¼šåº•å±‚æ•°ç»„çš„æŒ‡é’ˆã€åˆ‡ç‰‡çš„é•¿åº¦ï¼ˆlenï¼‰å’Œåˆ‡ç‰‡çš„å®¹é‡ï¼ˆcapï¼‰ã€‚</p>
<ul>
<li>å¤šä¸ªåˆ‡ç‰‡æŒ‡å‘åŒä¸€æ•°ç»„æ—¶ï¼Œå¯¹ä»»ä¸€åˆ‡ç‰‡è¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½æœ‰å¯èƒ½å¯¹å…¶ä»–åˆ‡ç‰‡é€ æˆå½±å“</li>
</ul>
<h3 id="åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ">åˆ‡ç‰‡ä¸èƒ½ç›´æ¥æ¯”è¾ƒ</h3>
<p>åˆ‡ç‰‡ä¹‹é—´æ˜¯ä¸èƒ½æ¯”è¾ƒçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨<code>==</code>æ“ä½œç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ªåˆ‡ç‰‡æ˜¯å¦å«æœ‰å…¨éƒ¨ç›¸ç­‰å…ƒç´ ã€‚ åˆ‡ç‰‡å”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œæ˜¯å’Œ<code>nil</code>æ¯”è¾ƒã€‚ ä¸€ä¸ª<code>nil</code>å€¼çš„åˆ‡ç‰‡å¹¶æ²¡æœ‰åº•å±‚æ•°ç»„ï¼Œä¸€ä¸ª<code>nil</code>å€¼çš„åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½è¯´ä¸€ä¸ªé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯0çš„åˆ‡ç‰‡ä¸€å®šæ˜¯<code>nil</code>ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s1</span> []<span style="color:#66d9ef">int</span>         <span style="color:#75715e">//len(s1)=0;cap(s1)=0;s1==nil
</span><span style="color:#75715e"></span><span style="color:#a6e22e">s2</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{}        <span style="color:#75715e">//len(s2)=0;cap(s2)=0;s2!=nil
</span><span style="color:#75715e"></span><span style="color:#a6e22e">s3</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>) <span style="color:#75715e">//len(s3)=0;cap(s3)=0;s3!=nil
</span></code></pre></div><p>æ‰€ä»¥è¦åˆ¤æ–­ä¸€ä¸ªåˆ‡ç‰‡æ˜¯å¦æ˜¯ç©ºçš„ï¼Œè¦æ˜¯ç”¨<code>len(s) == 0</code>æ¥åˆ¤æ–­ï¼Œä¸åº”è¯¥ä½¿ç”¨<code>s == nil</code>æ¥åˆ¤æ–­ã€‚</p>
<h3 id="åˆ‡ç‰‡çš„èµ‹å€¼æ‹·è´">åˆ‡ç‰‡çš„èµ‹å€¼æ‹·è´</h3>
<p>ä¸‹é¢çš„ä»£ç ä¸­æ¼”ç¤ºäº†æ‹·è´å‰åä¸¤ä¸ªå˜é‡å…±äº«åº•å±‚æ•°ç»„ï¼Œå¯¹ä¸€ä¸ªåˆ‡ç‰‡çš„ä¿®æ”¹ä¼šå½±å“å¦ä¸€ä¸ªåˆ‡ç‰‡çš„å†…å®¹ï¼Œè¿™ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">s1</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">3</span>) <span style="color:#75715e">//[0 0 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s1</span>             <span style="color:#75715e">//å°†s1ç›´æ¥èµ‹å€¼ç»™s2ï¼Œs1å’Œs2å…±ç”¨ä¸€ä¸ªåº•å±‚æ•°ç»„
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s2</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">100</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s1</span>) <span style="color:#75715e">//[100 0 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s2</span>) <span style="color:#75715e">//[100 0 0]
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="åˆ‡ç‰‡éå†">åˆ‡ç‰‡éå†</h3>
<p>åˆ‡ç‰‡çš„éå†æ–¹å¼å’Œæ•°ç»„æ˜¯ä¸€è‡´çš„ï¼Œæ”¯æŒç´¢å¼•éå†å’Œ<code>for range</code>éå†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">s</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">s</span>[<span style="color:#a6e22e">i</span>])
	}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">s</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span>)
	}
}
</code></pre></div><h3 id="appendæ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ ">append()æ–¹æ³•ä¸ºåˆ‡ç‰‡æ·»åŠ å…ƒç´ </h3>
<p>Goè¯­è¨€çš„å†…å»ºå‡½æ•°<code>append()</code>å¯ä»¥ä¸ºåˆ‡ç‰‡åŠ¨æ€æ·»åŠ å…ƒç´ ã€‚ å¯ä»¥ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å¦ä¸€ä¸ªåˆ‡ç‰‡ä¸­çš„å…ƒç´ ï¼ˆåé¢åŠ â€¦ï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>(){
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">1</span>)        <span style="color:#75715e">// [1]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)  <span style="color:#75715e">// [1 2 3 4]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s2</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>}  
	<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#a6e22e">s2</span><span style="color:#f92672">...</span>)    <span style="color:#75715e">// [1 2 3 4 5 6 7]
</span><span style="color:#75715e"></span>}
</code></pre></div><p>**æ³¨æ„ï¼š**é€šè¿‡varå£°æ˜çš„é›¶å€¼åˆ‡ç‰‡å¯ä»¥åœ¨<code>append()</code>å‡½æ•°ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€åˆå§‹åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
</code></pre></div><p>æ²¡æœ‰å¿…è¦åƒä¸‹é¢çš„ä»£ç ä¸€æ ·åˆå§‹åŒ–ä¸€ä¸ªåˆ‡ç‰‡å†ä¼ å…¥<code>append()</code>å‡½æ•°ä½¿ç”¨ï¼Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{}  <span style="color:#75715e">// æ²¡æœ‰å¿…è¦åˆå§‹åŒ–
</span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> = make([]<span style="color:#66d9ef">int</span>)  <span style="color:#75715e">// æ²¡æœ‰å¿…è¦åˆå§‹åŒ–
</span><span style="color:#75715e"></span><span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
</code></pre></div><p>æ¯ä¸ªåˆ‡ç‰‡ä¼šæŒ‡å‘ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„å®¹é‡å¤Ÿç”¨å°±æ·»åŠ æ–°å¢å…ƒç´ ã€‚å½“åº•å±‚æ•°ç»„ä¸èƒ½å®¹çº³æ–°å¢çš„å…ƒç´ æ—¶ï¼Œåˆ‡ç‰‡å°±ä¼šè‡ªåŠ¨æŒ‰ç…§ä¸€å®šçš„ç­–ç•¥è¿›è¡Œâ€œæ‰©å®¹â€ï¼Œæ­¤æ—¶è¯¥åˆ‡ç‰‡æŒ‡å‘çš„åº•å±‚æ•°ç»„å°±ä¼šæ›´æ¢ã€‚â€œæ‰©å®¹â€æ“ä½œå¾€å¾€å‘ç”Ÿåœ¨<code>append()</code>å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸éƒ½éœ€è¦ç”¨åŸå˜é‡æ¥æ”¶appendå‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">//append()æ·»åŠ å…ƒç´ å’Œåˆ‡ç‰‡æ‰©å®¹
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">numSlice</span> []<span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">numSlice</span> = append(<span style="color:#a6e22e">numSlice</span>, <span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%v  len:%d  cap:%d  ptr:%p\n&#34;</span>, <span style="color:#a6e22e">numSlice</span>, len(<span style="color:#a6e22e">numSlice</span>), cap(<span style="color:#a6e22e">numSlice</span>), <span style="color:#a6e22e">numSlice</span>)
	}
}
</code></pre></div><p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>0<span style="color:#f92672">]</span>  len:1  cap:1  ptr:0xc0000a8000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> 1<span style="color:#f92672">]</span>  len:2  cap:2  ptr:0xc0000a8040
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> 2<span style="color:#f92672">]</span>  len:3  cap:4  ptr:0xc0000b2020
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> 3<span style="color:#f92672">]</span>  len:4  cap:4  ptr:0xc0000b2020
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> 4<span style="color:#f92672">]</span>  len:5  cap:8  ptr:0xc0000b6000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> 5<span style="color:#f92672">]</span>  len:6  cap:8  ptr:0xc0000b6000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> 6<span style="color:#f92672">]</span>  len:7  cap:8  ptr:0xc0000b6000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">6</span> 7<span style="color:#f92672">]</span>  len:8  cap:8  ptr:0xc0000b6000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> 8<span style="color:#f92672">]</span>  len:9  cap:16  ptr:0xc0000b8000
<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">8</span> 9<span style="color:#f92672">]</span>  len:10  cap:16  ptr:0xc0000b8000
</code></pre></div><p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼š</p>
<ol>
<li><code>append()</code>å‡½æ•°å°†å…ƒç´ è¿½åŠ åˆ°åˆ‡ç‰‡çš„æœ€åå¹¶è¿”å›è¯¥åˆ‡ç‰‡ã€‚</li>
<li>åˆ‡ç‰‡numSliceçš„å®¹é‡æŒ‰ç…§1ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œ16è¿™æ ·çš„è§„åˆ™è‡ªåŠ¨è¿›è¡Œæ‰©å®¹ï¼Œæ¯æ¬¡æ‰©å®¹åéƒ½æ˜¯æ‰©å®¹å‰çš„2å€ã€‚</li>
</ol>
<p>append()å‡½æ•°è¿˜æ”¯æŒä¸€æ¬¡æ€§è¿½åŠ å¤šä¸ªå…ƒç´ ã€‚ ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">citySlice</span> []<span style="color:#66d9ef">string</span>
<span style="color:#75715e">// è¿½åŠ ä¸€ä¸ªå…ƒç´ 
</span><span style="color:#75715e"></span><span style="color:#a6e22e">citySlice</span> = append(<span style="color:#a6e22e">citySlice</span>, <span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>)
<span style="color:#75715e">// è¿½åŠ å¤šä¸ªå…ƒç´ 
</span><span style="color:#75715e"></span><span style="color:#a6e22e">citySlice</span> = append(<span style="color:#a6e22e">citySlice</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>, <span style="color:#e6db74">&#34;å¹¿å·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>)
<span style="color:#75715e">// è¿½åŠ åˆ‡ç‰‡
</span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;æˆéƒ½&#34;</span>, <span style="color:#e6db74">&#34;é‡åº†&#34;</span>}
<span style="color:#a6e22e">citySlice</span> = append(<span style="color:#a6e22e">citySlice</span>, <span style="color:#a6e22e">a</span><span style="color:#f92672">...</span>)
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">citySlice</span>) <span style="color:#75715e">//[åŒ—äº¬ ä¸Šæµ· å¹¿å· æ·±åœ³ æˆéƒ½ é‡åº†]
</span></code></pre></div><h3 id="ä½¿ç”¨copyå‡½æ•°å¤åˆ¶åˆ‡ç‰‡">ä½¿ç”¨copy()å‡½æ•°å¤åˆ¶åˆ‡ç‰‡</h3>
<p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[1 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>) <span style="color:#75715e">//[1 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1000</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[1000 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>) <span style="color:#75715e">//[1000 2 3 4 5]
</span><span style="color:#75715e"></span>}
</code></pre></div><p>ç”±äºåˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥aå’Œbå…¶å®éƒ½æŒ‡å‘äº†åŒä¸€å—å†…å­˜åœ°å€ã€‚ä¿®æ”¹bçš„åŒæ—¶açš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<p>Goè¯­è¨€å†…å»ºçš„<code>copy()</code>å‡½æ•°å¯ä»¥è¿…é€Ÿåœ°å°†ä¸€ä¸ªåˆ‡ç‰‡çš„æ•°æ®å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªåˆ‡ç‰‡ç©ºé—´ä¸­ï¼Œ<code>copy()</code>å‡½æ•°çš„ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">copy<span style="color:#f92672">(</span>destSlice, srcSlice <span style="color:#f92672">[]</span>T<span style="color:#f92672">)</span>
</code></pre></div><p>å…¶ä¸­ï¼š</p>
<ul>
<li>srcSlice: æ•°æ®æ¥æºåˆ‡ç‰‡</li>
<li>destSlice: ç›®æ ‡åˆ‡ç‰‡</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// copy()å¤åˆ¶åˆ‡ç‰‡
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">5</span>)
	copy(<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">a</span>)     <span style="color:#75715e">//ä½¿ç”¨copy()å‡½æ•°å°†åˆ‡ç‰‡aä¸­çš„å…ƒç´ å¤åˆ¶åˆ°åˆ‡ç‰‡c
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[1 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span>) <span style="color:#75715e">//[1 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">c</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">1000</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[1 2 3 4 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span>) <span style="color:#75715e">//[1000 2 3 4 5]
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ ">ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ </h3>
<p>Goè¯­è¨€ä¸­å¹¶æ²¡æœ‰åˆ é™¤åˆ‡ç‰‡å…ƒç´ çš„ä¸“ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡æœ¬èº«çš„ç‰¹æ€§æ¥åˆ é™¤å…ƒç´ ã€‚ ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// ä»åˆ‡ç‰‡ä¸­åˆ é™¤å…ƒç´ 
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">34</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">36</span>, <span style="color:#ae81ff">37</span>}
	<span style="color:#75715e">// è¦åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ 
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">a</span> = append(<span style="color:#a6e22e">a</span>[:<span style="color:#ae81ff">2</span>], <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">3</span>:]<span style="color:#f92672">...</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[30 31 33 34 35 36 37]
</span><span style="color:#75715e"></span>}
</code></pre></div><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼šè¦ä»åˆ‡ç‰‡aä¸­åˆ é™¤ç´¢å¼•ä¸º<code>index</code>çš„å…ƒç´ ï¼Œæ“ä½œæ–¹æ³•æ˜¯<code>a = append(a[:index], a[index+1:]...)</code></p>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹å˜é‡ä¸å¸¸é‡</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F/</guid>
      <description>å¸¸é‡ä¸å˜é‡</description>
      <content:encoded><![CDATA[<p>å˜é‡å’Œå¸¸é‡æ˜¯ç¼–ç¨‹ä¸­å¿…ä¸å¯å°‘çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="æ ‡è¯†ç¬¦ä¸å…³é”®å­—">æ ‡è¯†ç¬¦ä¸å…³é”®å­—</h3>
<h4 id="æ ‡è¯†ç¬¦">æ ‡è¯†ç¬¦</h4>
<p>å…³äºGoè¯­è¨€ä¸­çš„å‘½åè§„åˆ™ï¼Œä¸Cç±»ä¼¼ã€‚Goè¯­è¨€ä¸­æ ‡è¯†ç¬¦ç”±å­—æ¯ã€æ•°å­—å’Œ<code>_</code>(ä¸‹åˆ’çº¿)ç»„æˆï¼Œå¹¶ä¸”åªèƒ½ä»¥å­—æ¯å’Œ<code>_</code>å¼€å¤´ã€‚
ä¾‹å¦‚<code>aaa</code>,<code>_ </code>,<code>_123</code>,<code>a123</code></p>
<h4 id="å…³é”®å­—">å…³é”®å­—</h4>
<p>å…³é”®å­—æ˜¯æŒ‡ç¼–ç¨‹è¯­è¨€ä¸­é¢„å…ˆå®šä¹‰å¥½çš„å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„æ ‡è¯†ç¬¦ã€‚ä¸”ä¸èƒ½å°†å…³é”®å­—å’Œä¿ç•™å­—ä½œä¸ºå˜é‡å</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">//25ä¸ªå…³é”®å­—
</span><span style="color:#75715e"></span><span style="color:#66d9ef">break</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">func</span> <span style="color:#66d9ef">interface</span> <span style="color:#66d9ef">select</span>
<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">defer</span> <span style="color:#66d9ef">go</span> <span style="color:#66d9ef">map</span> <span style="color:#66d9ef">struct</span> 
<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">continue</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">fallthrough</span>
<span style="color:#66d9ef">if</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">goto</span> <span style="color:#f92672">package</span> <span style="color:#66d9ef">range</span> 
<span style="color:#f92672">import</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">switch</span> <span style="color:#66d9ef">type</span> <span style="color:#66d9ef">var</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">//37ä¸ªä¿ç•™å­—
</span><span style="color:#75715e"></span><span style="color:#a6e22e">Constants</span>: <span style="color:#66d9ef">true</span> <span style="color:#66d9ef">false</span> <span style="color:#66d9ef">iota</span> <span style="color:#66d9ef">nil</span>

<span style="color:#a6e22e">Types</span>: <span style="color:#66d9ef">int</span> <span style="color:#66d9ef">int8</span> <span style="color:#66d9ef">int16</span> <span style="color:#66d9ef">int32</span> <span style="color:#66d9ef">int64</span> <span style="color:#66d9ef">uint</span> <span style="color:#66d9ef">uint8</span> <span style="color:#66d9ef">uint16</span> <span style="color:#66d9ef">uint32</span> <span style="color:#66d9ef">uint64</span> <span style="color:#66d9ef">uintptr</span> <span style="color:#66d9ef">float32</span> <span style="color:#66d9ef">float64</span> <span style="color:#66d9ef">complex128</span> <span style="color:#66d9ef">complex64</span> <span style="color:#66d9ef">bool</span> <span style="color:#66d9ef">byte</span> <span style="color:#66d9ef">rune</span> <span style="color:#66d9ef">string</span>

<span style="color:#66d9ef">error</span> <span style="color:#a6e22e">Functions</span>: <span style="color:#a6e22e">make</span> <span style="color:#a6e22e">len</span> <span style="color:#a6e22e">cap</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">append</span> <span style="color:#a6e22e">copy</span> <span style="color:#a6e22e">close</span> <span style="color:#a6e22e">delete</span> <span style="color:#a6e22e">complex</span> <span style="color:#a6e22e">real</span> <span style="color:#a6e22e">imag</span> <span style="color:#a6e22e">panic</span> <span style="color:#a6e22e">recover</span>
</code></pre></div><h3 id="å˜é‡">å˜é‡</h3>
<h4 id="å˜é‡ç±»å‹">å˜é‡ç±»å‹</h4>
<p>å˜é‡çš„åŠŸèƒ½æ˜¯å­˜å‚¨æ•°æ®ï¼Œä¸åŒç±»å‹çš„å˜é‡å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ã€‚</p>
<p>å¸¸è§å˜é‡çš„æ•°æ®ç±»å‹æœ‰ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ç­‰ã€‚</p>
<p>Goè¯­è¨€ä¸­çš„æ¯ä¸€ä¸ªå˜é‡éƒ½æœ‰è‡ªå·±çš„ç±»å‹ï¼Œå¹¶ä¸”å˜é‡å¿…é¡»ç»è¿‡å£°æ˜æ‰èƒ½å¼€å§‹ä½¿ç”¨ã€‚</p>
<h4 id="å˜é‡å£°æ˜">å˜é‡å£°æ˜</h4>
<p>Goè¯­è¨€å£°æ˜å˜é‡çš„æ ¼å¼ä¸º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">å˜é‡å</span> <span style="color:#a6e22e">å˜é‡ç±»å‹</span>
</code></pre></div><p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">isOK</span> <span style="color:#66d9ef">bool</span>
</code></pre></div><p>å½“ç„¶ï¼Œåœ¨Goè¯­è¨€ä¸­ï¼Œå¯ä»¥æ‰¹é‡å£°æ˜å˜é‡</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span>(
    <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">c</span> <span style="color:#66d9ef">bool</span>
    <span style="color:#a6e22e">d</span> <span style="color:#66d9ef">float32</span>
)
</code></pre></div><h4 id="å˜é‡åˆå§‹åŒ–">å˜é‡åˆå§‹åŒ–</h4>
<p>Goè¯­è¨€åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å¯¹å˜é‡å¯¹åº”çš„å†…å­˜åŒºåŸŸè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚æ¯ä¸ªå˜é‡ä¼šè¢«åˆå§‹åŒ–æˆå…¶ç±»å‹çš„é»˜è®¤å€¼ï¼Œä¾‹å¦‚ï¼š æ•´å‹å’Œæµ®ç‚¹å‹å˜é‡çš„é»˜è®¤å€¼ä¸º<code>0</code>ã€‚ å­—ç¬¦ä¸²å˜é‡çš„é»˜è®¤å€¼ä¸º<code>ç©ºå­—ç¬¦ä¸²</code>ã€‚ å¸ƒå°”å‹å˜é‡é»˜è®¤ä¸º<code>false</code>ã€‚ åˆ‡ç‰‡ã€å‡½æ•°ã€æŒ‡é’ˆå˜é‡çš„é»˜è®¤ä¸º<code>nil</code>ã€‚</p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šåˆå§‹å€¼ã€‚å˜é‡åˆå§‹åŒ–çš„æ ‡å‡†æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">å˜é‡å</span> <span style="color:#a6e22e">ç±»å‹</span> = <span style="color:#a6e22e">å€¼</span>
</code></pre></div><p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span> = <span style="color:#e6db74">&#34;Q1mi&#34;</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">age</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">18</span>
</code></pre></div><p>åŒæ ·ï¼Œä¹Ÿæ”¯æŒå¤šä¸ªå˜é‡åˆå§‹åŒ–</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">age</span> = <span style="color:#e6db74">&#34;Q1mi&#34;</span>, <span style="color:#ae81ff">20</span>
</code></pre></div><p>{% note info, ç±»å‹æ¨å¯¼ %}</p>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå°†å˜é‡çš„ç±»å‹çœç•¥ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨ä¼šæ ¹æ®ç­‰å·å³è¾¹çš„å€¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹å®Œæˆåˆå§‹åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> = <span style="color:#e6db74">&#34;Q1mi&#34;</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">18</span>
</code></pre></div><p>{% note info, çŸ­å˜é‡å£°æ˜ %}</p>
<p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€ç•¥çš„<code>:=</code>æ–¹å¼å£°æ˜å¹¶åˆå§‹åŒ–å˜é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#75715e">// å…¨å±€å˜é‡m
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> = <span style="color:#ae81ff">100</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">n</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">10</span>
	<span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">200</span> <span style="color:#75715e">// æ­¤å¤„å£°æ˜å±€éƒ¨å˜é‡m
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>, <span style="color:#a6e22e">n</span>)
}
</code></pre></div><p>{% note info, åŒ¿åå˜é‡ %}
åœ¨ä½¿ç”¨å¤šé‡èµ‹å€¼æ—¶ï¼Œå¦‚æœæƒ³è¦å¿½ç•¥æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>åŒ¿åå˜é‡</code>ã€‚ åŒ¿åå˜é‡ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿<code>_</code>è¡¨ç¤ºã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test</span>() (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">string</span>) {
	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">10</span>, <span style="color:#e6db74">&#34;hahaha&#34;</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">test</span>()
	<span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">y</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">test</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;x=&#34;</span>, <span style="color:#a6e22e">x</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;y=&#34;</span>, <span style="color:#a6e22e">y</span>)
}
</code></pre></div><p>åŒ¿åå˜é‡ä¸å ç”¨å‘½åç©ºé—´ï¼Œä¸ä¼šåˆ†é…å†…å­˜ï¼Œæ‰€ä»¥åŒ¿åå˜é‡ä¹‹é—´ä¸å­˜åœ¨é‡å¤å£°æ˜ã€‚</p>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>å‡½æ•°å¤–çš„æ¯ä¸ªè¯­å¥éƒ½å¿…é¡»ä»¥å…³é”®å­—å¼€å§‹ï¼ˆvarã€constã€funcç­‰ï¼‰</li>
<li>:=ä¸èƒ½ä½¿ç”¨åœ¨å‡½æ•°å¤–ã€‚</li>
<li>_å¤šç”¨äºå ä½ï¼Œè¡¨ç¤ºå¿½ç•¥å€¼ã€‚</li>
</ul>
<h3 id="å¸¸é‡">å¸¸é‡</h3>
<p>ç›¸å¯¹äºå˜é‡ï¼Œå¸¸é‡æ˜¯æ’å®šä¸å˜çš„å€¼ï¼Œå¤šç”¨äºå®šä¹‰ç¨‹åºè¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜çš„é‚£äº›å€¼ã€‚ å¸¸é‡çš„å£°æ˜å’Œå˜é‡å£°æ˜éå¸¸ç±»ä¼¼ï¼Œåªæ˜¯æŠŠ<code>ar</code>æ¢æˆäº†<code>const</code>ï¼Œå¸¸é‡åœ¨å®šä¹‰çš„æ—¶å€™å¿…é¡»èµ‹å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pi</span> = <span style="color:#ae81ff">3.1415</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">e</span> = <span style="color:#ae81ff">2.7182</span>
</code></pre></div><p>å£°æ˜äº†<code>pi</code>å’Œ<code>e</code>è¿™ä¸¤ä¸ªå¸¸é‡ä¹‹åï¼Œåœ¨æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´å®ƒä»¬çš„å€¼éƒ½ä¸èƒ½å†å‘ç”Ÿå˜åŒ–äº†ã€‚</p>
<p>å¤šä¸ªå¸¸é‡ä¹Ÿå¯ä»¥ä¸€èµ·å£°æ˜ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">pi</span> = <span style="color:#ae81ff">3.1415</span>
    <span style="color:#a6e22e">e</span> = <span style="color:#ae81ff">2.7182</span>
)
</code></pre></div><p>conståŒæ—¶å£°æ˜å¤šä¸ªå¸¸é‡æ—¶ï¼Œå¦‚æœçœç•¥äº†å€¼åˆ™è¡¨ç¤ºå’Œä¸Šé¢ä¸€è¡Œçš„å€¼ç›¸åŒã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">n1</span> = <span style="color:#ae81ff">100</span>
    <span style="color:#a6e22e">n2</span>
    <span style="color:#a6e22e">n3</span>
)
</code></pre></div>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹å¹¶å‘</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B9%B6%E5%8F%91/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B9%B6%E5%8F%91/</guid>
      <description>å¹¶å‘</description>
      <content:encoded><![CDATA[<p>å¹¶å‘æ˜¯ç¼–ç¨‹é‡Œé¢ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼ŒGoè¯­è¨€åœ¨è¯­è¨€å±‚é¢å¤©ç”Ÿæ”¯æŒå¹¶å‘ã€‚</p>
<h3 id="å¹¶å‘å’Œå¹¶è¡Œ">å¹¶å‘å’Œå¹¶è¡Œ</h3>
<p>å¹¶å‘ï¼šåŒä¸€æ—¶é—´æ®µå†…æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚</p>
<p>å¹¶è¡Œï¼šåŒä¸€æ—¶åˆ»æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚</p>
<p>Goè¯­è¨€çš„å¹¶å‘é€šè¿‡<code>goroutine</code>å®ç°ã€‚<code>goroutine</code>ç±»ä¼¼äºè¿›ç¨‹ï¼Œå±äºç”¨æˆ·æ€çš„è¿›ç¨‹ã€‚å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºæˆåƒä¸Šä¸‡ä¸ª<code>goroutine</code>å¹¶å‘å·¥ä½œã€‚<code>goroutine</code>æ˜¯ç”±Goè¯­è¨€çš„è¿è¡Œæ—¶è°ƒåº¦å®Œæˆï¼Œè€Œçº¿ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦å®Œæˆã€‚</p>
<p>Goè¯­è¨€è¿˜æä¾›<code>channel</code>åœ¨å¤šä¸ª<code>goroutine</code>é—´è¿›è¡Œé€šä¿¡ã€‚<code>goroutine</code>å’Œ<code>channel</code>æ˜¯Goè¯­è¨€å¹¶æˆçš„CSPå¹¶å‘æ¨¡å¼çš„é‡è¦å®ç°åŸºç¡€ã€‚</p>
<h3 id="goroutine">goroutine</h3>
<p>Goè¯­è¨€ä¸­<code>goroutine</code>çš„æ¦‚å¿µç±»ä¼¼äºçº¿ç¨‹ä½† <code>goroutine</code>æ˜¯ç”±Goçš„è¿è¡Œæ—¶ï¼ˆruntimeï¼‰è°ƒåº¦å’Œç®¡ç†çš„ã€‚</p>
<h4 id="goroutineçš„ä½¿ç”¨">goroutineçš„ä½¿ç”¨</h4>
<p>Goè¯­è¨€ä¸­ä½¿ç”¨<code>goroutine</code>éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™åœ¨å‰é¢åŠ <code>go</code>å…³é”®å­—ï¼Œå°±å¯ä»¥ä¸ºä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ª<code>goroutine</code>ã€‚</p>
<p>ä¸€ä¸ª<code>gotoutine</code>å¿…å®šå¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºçš„å¤šä¸ª<code>goroutine</code>å»æ‰§è¡Œç›¸åŒçš„å‡½æ•°ã€‚</p>
<h4 id="å¯åŠ¨å•ä¸ªgoroutine">å¯åŠ¨å•ä¸ªgoroutine</h4>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hello</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello goroutine!&#34;</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">hello</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main goroutine done!&#34;</span>)
}
</code></pre></div><p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœæ˜¯<code>Hello goroutine!</code> å’Œ<code>main goroutine done!</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hello</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello goroutine!&#34;</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">hello</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main goroutine done!&#34;</span>)
}
</code></pre></div><p>è¿™ä¸ªä¾‹å­å¯åŠ¨äº†ä¸€ä¸ªgoroutineæ‰§è¡Œhelloå‡½æ•°ï¼Œç„¶è€Œç»“æœä¸­åªæ‰“å°å‡ºäº†<code>main goroutine done!</code>ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒGoç¨‹åºä¸º<code>main()</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„goroutineï¼Œå½“<code>main()</code>å‡½æ•°è¿”å›çš„æ—¶å€™ä¹Ÿå°±æ„å‘³è¿™mainçš„goroutineå°±ç»“æŸäº†ï¼Œä¹Ÿå°±æ„å‘³ç€ç¨‹åºç»“æŸï¼Œå…¶ä»–çš„goroutineä¹Ÿä¼šè¢«ç»“æŸæ‰ã€‚æ¥å°±æ˜¯è¯´åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>hello()</code>è¿˜æ²¡æ¥å¾—åŠè¿›è¡Œï¼Œç¨‹åºå°±ç»“æŸäº†ã€‚</p>
<p>å¦‚ä½•æ‰èƒ½å°†hello()è¿›è¡Œå‘¢ï¼Ÿæœ€ç®€å•ç²—æš´çš„æ–¹å¼å°±æ˜¯<code>time.Sleep</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hello</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello goroutine!&#34;</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">hello</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main goroutine done!&#34;</span>)
	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">1000</span>)
}
</code></pre></div><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ä¼šå‘ç°ï¼Œè¿™ä¸€æ¬¡å…ˆæ‰“å°<code>main goroutine done!</code>ï¼Œç„¶åç´§æ¥ç€æ‰“å°<code>Hello Goroutine!</code>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åˆ›å»ºæ–°çš„goroutineçš„æ—¶å€™éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œè€Œæ­¤æ—¶mainå‡½æ•°æ‰€åœ¨çš„<code>goroutine</code>æ˜¯ç»§ç»­æ‰§è¡Œçš„ã€‚</p>
<h4 id="å¯åŠ¨å¤šä¸ªgoroutine">å¯åŠ¨å¤šä¸ªgoroutine</h4>
<p>ä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;sync&#34;</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hello</span>(<span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>() <span style="color:#75715e">//goroutineç»“æŸä¹Ÿè¦ç™»è®°,-1
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello goroutine&#34;</span>, <span style="color:#a6e22e">i</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>) <span style="color:#75715e">//å¯åŠ¨ä¸€ä¸ªgoroutineå°±ç™»è®°ä¸€æ¬¡,+1
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">hello</span>(<span style="color:#a6e22e">i</span>)
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>() <span style="color:#75715e">//ç­‰å¾…æ‰€æœ‰ç™»è®°çš„goroutineéƒ½ç»“æŸ
</span><span style="color:#75715e"></span>}
</code></pre></div><p>å¤šæ¬¡æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œä¼šå‘ç°æ¯æ¬¡æ‰“å°çš„æ•°å­—çš„é¡ºåºéƒ½ä¸ä¸€è‡´ã€‚è¿™æ˜¯å› ä¸º10ä¸ª<code>goroutine</code>æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œè€Œ<code>goroutine</code>çš„è°ƒåº¦æ˜¯éšæœºçš„ã€‚</p>
<h3 id="goroutineä¸çº¿ç¨‹">goroutineä¸çº¿ç¨‹</h3>
<h4 id="goroutineè°ƒåº¦">goroutineè°ƒåº¦</h4>
<p>GPMæ˜¯Goè¯­è¨€è¿è¡Œæ—¶å±‚é¢çš„å®ç°ï¼Œæ˜¯Goè¯­è¨€è‡ªå·±å®ç°çš„ä¸€å¥—è°ƒåº¦ç³»ç»Ÿã€‚åŒºåˆ«äºæ“ä½œç³»ç»Ÿè°ƒåº¦OSçº¿ç¨‹ã€‚</p>
<h4 id="gomaxprocs">GOMAXPROCS</h4>
<p>Goè¿è¡Œæ—¶çš„è°ƒåº¦å™¨ä½¿ç”¨<code>GOMAXPROCS</code>å‚æ•°æ¥ç¡®å®šéœ€è¦ä½¿ç”¨å¤šå°‘ä¸ªOSçº¿ç¨‹æ¥åŒæ—¶æ‰§è¡ŒGoä»£ç ã€‚é»˜è®¤å€¼æ˜¯æœºå™¨ä¸Šçš„CPUæ ¸å¿ƒæ•°ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ª8æ ¸å¿ƒçš„æœºå™¨ä¸Šï¼Œè°ƒåº¦å™¨ä¼šæŠŠGoä»£ç åŒæ—¶è°ƒåº¦åˆ°8ä¸ªOSçº¿ç¨‹ä¸Šï¼ˆGOMAXPROCSæ˜¯m:nè°ƒåº¦ä¸­çš„nï¼‰ã€‚</p>
<p>Goè¯­è¨€ä¸­å¯ä»¥é€šè¿‡<code>runtime.GOMAXPROCS()</code>å‡½æ•°è®¾ç½®å½“å‰ç¨‹åºå¹¶å‘æ—¶å ç”¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°ã€‚</p>
<p>Go1.5ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å•æ ¸å¿ƒæ‰§è¡Œã€‚Go1.5ç‰ˆæœ¬ä¹‹åï¼Œé»˜è®¤ä½¿ç”¨å…¨éƒ¨çš„CPUé€»è¾‘æ ¸å¿ƒæ•°ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä»»åŠ¡åˆ†é…åˆ°ä¸åŒçš„CPUé€»è¾‘æ ¸å¿ƒä¸Šå®ç°å¹¶è¡Œçš„æ•ˆæœï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;runtime&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">a</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;A:&#34;</span>, <span style="color:#a6e22e">i</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">b</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;B:&#34;</span>, <span style="color:#a6e22e">i</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GOMAXPROCS</span>(<span style="color:#ae81ff">1</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">a</span>()
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">b</span>()
	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
}
</code></pre></div><p>ä¸¤ä¸ªä»»åŠ¡åªæœ‰ä¸€ä¸ªé€»è¾‘æ ¸å¿ƒï¼Œæ­¤æ—¶æ˜¯åšå®Œä¸€ä¸ªä»»åŠ¡å†åšå¦ä¸€ä¸ªä»»åŠ¡ã€‚å°†é€»è¾‘æ ¸å¿ƒæ•°è®¾ç½®ä¸º2ï¼Œæ­¤æ—¶ä¸¤ä¸ªä»»åŠ¡å¹¶è¡Œæ‰§è¡Œã€‚</p>
<p>Goè¯­è¨€ä¸­çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹å’Œgoroutineçš„å…³ç³»ï¼š</p>
<ol>
<li>ä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹å¯¹åº”ç”¨æˆ·æ€å¤šä¸ªgoroutineã€‚</li>
<li>goç¨‹åºå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹ã€‚</li>
<li>goroutineå’ŒOSçº¿ç¨‹æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œå³m:nã€‚</li>
</ol>
<h3 id="channel">channel</h3>
<p>å•çº¯åœ°å°†å‡½æ•°å¹¶å‘æ‰§è¡Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚å‡½æ•°ä¸å‡½æ•°é—´éœ€è¦äº¤æ¢æ•°æ®æ‰èƒ½ä½“ç°å¹¶å‘æ‰§è¡Œå‡½æ•°çš„æ„ä¹‰ã€‚</p>
<p>å¦‚æœè¯´<code>goroutine</code>æ˜¯Goç¨‹åºå¹¶å‘çš„æ‰§è¡Œä½“ï¼Œ<code>channel</code>å°±æ˜¯å®ƒä»¬ä¹‹é—´çš„è¿æ¥ã€‚<code>channel</code>æ˜¯å¯ä»¥è®©ä¸€ä¸ª<code>goroutine</code>å‘é€ç‰¹å®šå€¼åˆ°å¦ä¸€ä¸ª<code>goroutine</code>çš„é€šä¿¡æœºåˆ¶ã€‚</p>
<p>Go è¯­è¨€ä¸­çš„é€šé“ï¼ˆchannelï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ã€‚é€šé“åƒä¸€ä¸ªä¼ é€å¸¦æˆ–è€…é˜Ÿåˆ—ï¼Œæ€»æ˜¯éµå¾ªå…ˆå…¥å…ˆå‡ºï¼ˆFirst In First Outï¼‰çš„è§„åˆ™ï¼Œä¿è¯æ”¶å‘æ•°æ®çš„é¡ºåºã€‚æ¯ä¸€ä¸ªé€šé“éƒ½æ˜¯ä¸€ä¸ªå…·ä½“ç±»å‹çš„å¯¼ç®¡ï¼Œä¹Ÿå°±æ˜¯å£°æ˜channelçš„æ—¶å€™éœ€è¦ä¸ºå…¶æŒ‡å®šå…ƒç´ ç±»å‹ã€‚</p>
<h4 id="channelç±»å‹">channelç±»å‹</h4>
<p><code>channel</code>æ˜¯ä¸€ç§ç±»å‹ï¼Œä¸€ç§å¼•ç”¨ç±»å‹ã€‚å£°æ˜æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">å˜é‡</span> <span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">å…ƒç´ ç±»å‹</span>
</code></pre></div><p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ch1</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ch2</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ch3</span> <span style="color:#66d9ef">chan</span> []<span style="color:#66d9ef">int</span>
</code></pre></div><h4 id="åˆ›å»ºchannel">åˆ›å»ºchannel</h4>
<p>é€šé“æ˜¯å¼•ç”¨ç±»å‹ï¼Œé€šé“ç±»å‹çš„ç©ºå€¼æ˜¯<code>nil</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">ch</span>) <span style="color:#75715e">//nil
</span></code></pre></div><p>å£°æ˜çš„é€šé“åœ¨<code>make</code>åˆå§‹åŒ–åæ‰èƒ½ä½¿ç”¨ã€‚</p>
<p>æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">make(<span style="color:#66d9ef">chan</span> <span style="color:#a6e22e">å…ƒç´ ç±»å‹</span>, [<span style="color:#a6e22e">å¤§å°</span>])
</code></pre></div><p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ch1</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
<span style="color:#a6e22e">ch2</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">bool</span>)
<span style="color:#a6e22e">ch3</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> []<span style="color:#66d9ef">int</span>)
</code></pre></div><h4 id="channelæ“ä½œ">channelæ“ä½œ</h4>
<p>é€šé“æœ‰å‘é€ï¼ˆsendï¼‰ã€æ¥æ”¶(receiveï¼‰å’Œå…³é—­ï¼ˆcloseï¼‰ä¸‰ç§æ“ä½œã€‚</p>
<p>å‘é€å’Œæ¥æ”¶éƒ½ä½¿ç”¨<code>&lt;-</code>ç¬¦å·ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å…ˆä½¿ç”¨ä»¥ä¸‹è¯­å¥å®šä¹‰ä¸€ä¸ªé€šé“ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
</code></pre></div><h5 id="å‘é€">å‘é€</h5>
<p>å°†ä¸€ä¸ªå€¼å‘é€åˆ°é€šé“ä¸­ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">10</span> <span style="color:#75715e">// æŠŠ10å‘é€åˆ°chä¸­
</span></code></pre></div><h5 id="æ¥æ”¶">æ¥æ”¶</h5>
<p>ä»ä¸€ä¸ªé€šé“ä¸­æ¥æ”¶å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">x</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ch</span> <span style="color:#75715e">// ä»chä¸­æ¥æ”¶å€¼å¹¶èµ‹å€¼ç»™å˜é‡x
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>       <span style="color:#75715e">// ä»chä¸­æ¥æ”¶å€¼ï¼Œå¿½ç•¥ç»“æœ
</span></code></pre></div><h5 id="å…³é—­">å…³é—­</h5>
<p>æˆ‘ä»¬é€šè¿‡è°ƒç”¨å†…ç½®çš„<code>close</code>å‡½æ•°æ¥å…³é—­é€šé“ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">close(<span style="color:#a6e22e">ch</span>)
</code></pre></div><p>å…³äºå…³é—­é€šé“éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œåªæœ‰åœ¨é€šçŸ¥æ¥æ”¶æ–¹goroutineæ‰€æœ‰çš„æ•°æ®éƒ½å‘é€å®Œæ¯•çš„æ—¶å€™æ‰éœ€è¦å…³é—­é€šé“ã€‚é€šé“æ˜¯å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶çš„ï¼Œå®ƒå’Œå…³é—­æ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨ç»“æŸæ“ä½œä¹‹åå…³é—­æ–‡ä»¶æ˜¯å¿…é¡»è¦åšçš„ï¼Œä½†å…³é—­é€šé“ä¸æ˜¯å¿…é¡»çš„ã€‚</p>
<p>å…³é—­åçš„é€šé“æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“å†å‘é€å€¼å°±ä¼šå¯¼è‡´panicã€‚</li>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„é€šé“è¿›è¡Œæ¥æ”¶ä¼šä¸€ç›´è·å–å€¼ç›´åˆ°é€šé“ä¸ºç©ºã€‚</li>
<li>å¯¹ä¸€ä¸ªå…³é—­çš„å¹¶ä¸”æ²¡æœ‰å€¼çš„é€šé“æ‰§è¡Œæ¥æ”¶æ“ä½œä¼šå¾—åˆ°å¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚</li>
<li>å…³é—­ä¸€ä¸ªå·²ç»å…³é—­çš„é€šé“ä¼šå¯¼è‡´panicã€‚</li>
</ol>
<h4 id="æ— ç¼“å†²çš„é€šé“">æ— ç¼“å†²çš„é€šé“</h4>
<p>æ— ç¼“å†²çš„é€šé“åˆç§°ä¸ºé˜»å¡çš„é€šé“ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">10</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;æˆåŠŸ&#34;</span>)
}
</code></pre></div><p>è¿™æ®µä»£ç åœ¨æ‰§è¡Œæ—¶ä¼šå‡ºç°é”™è¯¯</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fatal error: all goroutines are asleep - deadlock!

goroutine <span style="color:#ae81ff">1</span> <span style="color:#f92672">[</span>chan send<span style="color:#f92672">]</span>:
main.main<span style="color:#f92672">()</span>
        E:/MyStudy/Programfiles/VsCode/GO/src/mytest/test.go:9 +0x5f
exit status <span style="color:#ae81ff">2</span>
</code></pre></div><p>å› ä¸º<code>ch := make(chan int)</code>åˆ›å»ºçš„æ˜¯æ— ç¼“å†²çš„é€šé“ï¼Œæ— ç¼“å†²é€šé“å¿…é¡»æœ‰æ¥å—æ‰èƒ½å‘é€ã€‚</p>
<p>ä¸Šé¢çš„ä»£ç ä¼šé˜»å¡åœ¨<code>ch &lt;- 10</code>è¿™ä¸€è¡Œä»£ç å½¢æˆæ­»é”ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>ä¸€ç§æ–¹æ³•å°±æ˜¯å¯ç”¨ä¸€ä¸ªgoroutineå»æ¥å—ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">rec</span>(<span style="color:#a6e22e">c</span> <span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">ret</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">c</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;æˆåŠŸ&#34;</span>, <span style="color:#a6e22e">ret</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">rec</span>(<span style="color:#a6e22e">ch</span>)
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">10</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;æˆåŠŸ&#34;</span>)
}
</code></pre></div><p>æ— ç¼“å†²é€šé“ä¸Šçš„å‘é€æ“ä½œä¼šé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ª<code>goroutine</code>åœ¨è¯¥é€šé“ä¸Šæ‰§è¡Œæ¥æ”¶æ“ä½œï¼Œè¿™æ—¶å€¼æ‰èƒ½å‘é€æˆåŠŸï¼Œä¸¤ä¸ª<code>goroutine</code>å°†ç»§ç»­æ‰§è¡Œã€‚ç›¸åï¼Œå¦‚æœæ¥æ”¶æ“ä½œå…ˆæ‰§è¡Œï¼Œæ¥æ”¶æ–¹çš„goroutineå°†é˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ª<code>goroutine</code>åœ¨è¯¥é€šé“ä¸Šå‘é€ä¸€ä¸ªå€¼ã€‚</p>
<p>ä½¿ç”¨æ— ç¼“å†²é€šé“è¿›è¡Œé€šä¿¡å°†å¯¼è‡´å‘é€å’Œæ¥æ”¶çš„<code>goroutine</code>åŒæ­¥åŒ–ã€‚å› æ­¤ï¼Œæ— ç¼“å†²é€šé“ä¹Ÿè¢«ç§°ä¸º<code>åŒæ­¥é€šé“</code>ã€‚</p>
<h4 id="æœ‰ç¼“å†²çš„é€šé“">æœ‰ç¼“å†²çš„é€šé“</h4>
<p>è§£å†³ä¸Šé¢é—®é¢˜çš„æ–¹æ³•è¿˜æœ‰ä¸€ç§å°±æ˜¯ä½¿ç”¨æœ‰ç¼“å†²åŒºçš„é€šé“ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–é€šé“çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šé€šé“çš„å®¹é‡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">1</span>) <span style="color:#75715e">// åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º1çš„æœ‰ç¼“å†²åŒºé€šé“
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">10</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;å‘é€æˆåŠŸ&#34;</span>)
}
</code></pre></div><p>åªè¦é€šé“çš„å®¹é‡å¤§äºé›¶ï¼Œé‚£ä¹ˆè¯¥é€šé“å°±æ˜¯æœ‰ç¼“å†²çš„é€šé“ï¼Œé€šé“çš„å®¹é‡è¡¨ç¤ºé€šé“ä¸­èƒ½å­˜æ”¾å…ƒç´ çš„æ•°é‡ã€‚å°±åƒå°åŒºçš„å¿«é€’æŸœåªæœ‰é‚£ä¹ˆä¸ªå¤šæ ¼å­ï¼Œæ ¼å­æ»¡äº†å°±è£…ä¸ä¸‹äº†ï¼Œå°±é˜»å¡äº†ï¼Œç­‰åˆ°åˆ«äººå–èµ°ä¸€ä¸ªå¿«é€’å‘˜å°±èƒ½å¾€é‡Œé¢æ”¾ä¸€ä¸ªã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„<code>len</code>å‡½æ•°è·å–é€šé“å†…å…ƒç´ çš„æ•°é‡ï¼Œä½¿ç”¨<code>cap</code>å‡½æ•°è·å–é€šé“çš„å®¹é‡ã€‚</p>
<h4 id="for-range-ä»é€šé“å¾ªç¯å–å€¼">for range ä»é€šé“å¾ªç¯å–å€¼</h4>
<p>å½“å‘é€šé“ä¸­å‘é€å®Œæ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>close</code>å‡½æ•°æ¥å…³é—­é€šé“ã€‚</p>
<p>å½“é€šé“è¢«å…³é—­æ—¶ï¼Œå†å¾€è¯¥é€šé“å‘é€å€¼ä¼šå¼•å‘<code>panic</code>ï¼Œä»è¯¥é€šé“å–å€¼çš„æ“ä½œä¼šå…ˆå–å®Œé€šé“ä¸­çš„å€¼ï¼Œå†ç„¶åå–åˆ°çš„å€¼ä¸€ç›´éƒ½æ˜¯å¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚é‚£å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé€šé“æ˜¯å¦è¢«å…³é—­äº†å‘¢ï¼Ÿ</p>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch1</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">ch2</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#75715e">// å¼€å¯goroutineå°†0~100çš„æ•°å‘é€åˆ°ch1ä¸­
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">100</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
			<span style="color:#a6e22e">ch1</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span>
		}
		close(<span style="color:#a6e22e">ch1</span>)
	}()
	<span style="color:#75715e">// å¼€å¯goroutineä»ch1ä¸­æ¥æ”¶å€¼ï¼Œå¹¶å°†è¯¥å€¼çš„å¹³æ–¹å‘é€åˆ°ch2ä¸­
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
		<span style="color:#66d9ef">for</span> {
			<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch1</span> <span style="color:#75715e">// é€šé“å…³é—­åå†å–å€¼ok=false
</span><span style="color:#75715e"></span>			<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
				<span style="color:#66d9ef">break</span>
			}
			<span style="color:#a6e22e">ch2</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">i</span>
		}
		close(<span style="color:#a6e22e">ch2</span>)
	}()
	<span style="color:#75715e">// åœ¨ä¸»goroutineä¸­ä»ch2ä¸­æ¥æ”¶å€¼æ‰“å°
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ch2</span> { <span style="color:#75715e">// é€šé“å…³é—­åä¼šé€€å‡ºfor rangeå¾ªç¯
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
	}

}
</code></pre></div><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸¤ç§æ–¹å¼åœ¨æ¥æ”¶å€¼çš„æ—¶å€™åˆ¤æ–­è¯¥é€šé“æ˜¯å¦è¢«å…³é—­ï¼Œä¸è¿‡é€šå¸¸ä½¿ç”¨çš„æ˜¯<code>for range</code>çš„æ–¹å¼ã€‚ä½¿ç”¨<code>for range</code>éå†é€šé“ï¼Œå½“é€šé“è¢«å…³é—­çš„æ—¶å€™å°±ä¼šé€€å‡º<code>for range</code>ã€‚</p>
<h4 id="å•å‘é€šé“">å•å‘é€šé“</h4>
<p>æœ‰çš„æ—¶å€™å°†é€šé“ä½œä¸ºå‚æ•°åœ¨å¤šä¸ªä»»åŠ¡å‡½æ•°é—´ä¼ é€’ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¦åœ¨ä¸åŒçš„ä»»åŠ¡å‡½æ•°ä¸­ä½¿ç”¨é€šé“éƒ½ä¼šå¯¹å…¶è¿›è¡Œé™åˆ¶ï¼Œæ¯”å¦‚é™åˆ¶é€šé“åœ¨å‡½æ•°ä¸­åªèƒ½å‘é€æˆ–åªèƒ½æ¥æ”¶ã€‚</p>
<p>Goè¯­è¨€ä¸­æä¾›äº†<strong>å•å‘é€šé“</strong>æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„ä¾‹å­æ”¹é€ å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">counter</span>(<span style="color:#a6e22e">out</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">100</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span>
	}
	close(<span style="color:#a6e22e">out</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">squarer</span>(<span style="color:#a6e22e">out</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">in</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">in</span> {
		<span style="color:#a6e22e">out</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">i</span>
	}
	close(<span style="color:#a6e22e">out</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printer</span>(<span style="color:#a6e22e">in</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">in</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch1</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">ch2</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">counter</span>(<span style="color:#a6e22e">ch1</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">squarer</span>(<span style="color:#a6e22e">ch2</span>, <span style="color:#a6e22e">ch1</span>)
	<span style="color:#a6e22e">printer</span>(<span style="color:#a6e22e">ch2</span>)
}
</code></pre></div><p>å…¶ä¸­ï¼Œ</p>
<ul>
<li><code>chan&lt;- int</code>æ˜¯ä¸€ä¸ªåªå†™å•å‘é€šé“ï¼ˆåªèƒ½å¯¹å…¶å†™å…¥intç±»å‹å€¼ï¼‰ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œå‘é€æ“ä½œä½†æ˜¯ä¸èƒ½æ‰§è¡Œæ¥æ”¶æ“ä½œï¼›</li>
<li><code>&lt;-chan int</code>æ˜¯ä¸€ä¸ªåªè¯»å•å‘é€šé“ï¼ˆåªèƒ½ä»å…¶è¯»å–intç±»å‹å€¼ï¼‰ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œæ¥æ”¶æ“ä½œä½†æ˜¯ä¸èƒ½æ‰§è¡Œå‘é€æ“ä½œã€‚</li>
</ul>
<p>åœ¨å‡½æ•°ä¼ å‚åŠä»»ä½•èµ‹å€¼æ“ä½œä¸­å¯ä»¥å°†åŒå‘é€šé“è½¬æ¢ä¸ºå•å‘é€šé“ï¼Œä½†åè¿‡æ¥æ˜¯ä¸å¯ä»¥çš„ã€‚</p>
<h3 id="worker-pool-goroutineæ± ">worker pool ï¼ˆgoroutineæ± ï¼‰</h3>
<p>åœ¨å·¥ä½œä¸­æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å¯ä»¥æŒ‡å®šå¯åŠ¨çš„goroutineæ•°é‡â€“<code>worker pool</code>æ¨¡å¼ï¼Œæ§åˆ¶<code>goroutine</code>çš„æ•°é‡ï¼Œé˜²æ­¢<code>goroutine</code>æ³„æ¼å’Œæš´æ¶¨ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">worker</span>(<span style="color:#a6e22e">id</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">jobs</span> <span style="color:#f92672">&lt;-</span><span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">results</span> <span style="color:#66d9ef">chan</span><span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">jobs</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;worker:%d start job:%d\n&#34;</span>, <span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;worker:%d end job:%d\n&#34;</span>, <span style="color:#a6e22e">id</span>, <span style="color:#a6e22e">i</span>)

		<span style="color:#a6e22e">results</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>
	}
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">jobs</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">100</span>)
	<span style="color:#a6e22e">results</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">100</span>)

    <span style="color:#75715e">//åªå¼€å¯3ä¸ªgoroutine
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">w</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">3</span>; <span style="color:#a6e22e">w</span><span style="color:#f92672">++</span> {
		<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">worker</span>(<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">jobs</span>, <span style="color:#a6e22e">results</span>)
	}
	<span style="color:#75715e">//5ä¸ªä»»åŠ¡
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">j</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">5</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">jobs</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">j</span>
	}

	close(<span style="color:#a6e22e">jobs</span>)

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">a</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">5</span>; <span style="color:#a6e22e">a</span><span style="color:#f92672">++</span> {
		<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">results</span>
	}
}

</code></pre></div><h3 id="selectå¤šè·¯å¤ç”¨">selectå¤šè·¯å¤ç”¨</h3>
<p>åœ¨æŸäº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦åŒæ—¶ä»å¤šä¸ªé€šé“æ¥æ”¶æ•°æ®ã€‚é€šé“åœ¨æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å¯ä»¥æ¥æ”¶å°†ä¼šå‘ç”Ÿé˜»å¡ã€‚ä½ ä¹Ÿè®¸ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ä½¿ç”¨éå†çš„æ–¹å¼æ¥å®ç°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">for</span>{
    <span style="color:#75715e">// å°è¯•ä»ch1æ¥æ”¶å€¼
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch1</span>
    <span style="color:#75715e">// å°è¯•ä»ch2æ¥æ”¶å€¼
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch2</span>
    <span style="color:#960050;background-color:#1e0010">â€¦</span>
}
</code></pre></div><p>è¿™ç§æ–¹å¼è™½ç„¶å¯ä»¥å®ç°ä»å¤šä¸ªé€šé“æ¥æ”¶å€¼çš„éœ€æ±‚ï¼Œä½†æ˜¯è¿è¡Œæ€§èƒ½ä¼šå·®å¾ˆå¤šã€‚ä¸ºäº†åº”å¯¹è¿™ç§åœºæ™¯ï¼ŒGoå†…ç½®äº†<code>select</code>å…³é”®å­—ï¼Œå¯ä»¥åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œã€‚</p>
<p><code>select</code>çš„ä½¿ç”¨ç±»ä¼¼äºswitchè¯­å¥ï¼Œå®ƒæœ‰ä¸€ç³»åˆ—caseåˆ†æ”¯å’Œä¸€ä¸ªé»˜è®¤çš„åˆ†æ”¯ã€‚æ¯ä¸ªcaseä¼šå¯¹åº”ä¸€ä¸ªé€šé“çš„é€šä¿¡ï¼ˆæ¥æ”¶æˆ–å‘é€ï¼‰è¿‡ç¨‹ã€‚<code>select</code>ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æŸä¸ª<code>case</code>çš„é€šä¿¡æ“ä½œå®Œæˆæ—¶ï¼Œå°±ä¼šæ‰§è¡Œ<code>case</code>åˆ†æ”¯å¯¹åº”çš„è¯­å¥ã€‚å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">select</span>{
    <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch1</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch2</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">ch3</span><span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">data</span>:
        <span style="color:#f92672">...</span>
    <span style="color:#66d9ef">default</span>:
        <span style="color:#a6e22e">é»˜è®¤æ“ä½œ</span>
}
</code></pre></div><p>ä¸¾ä¸ªä¾‹å­æ¥æ¼”ç¤ºä¸‹<code>select</code>çš„ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> <span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">1</span>)
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#66d9ef">select</span> {
		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">x</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">i</span>:
		}
	}
}
</code></pre></div><p>ä½¿ç”¨<code>select</code>è¯­å¥èƒ½æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<ul>
<li>å¯å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªchannelçš„å‘é€/æ¥æ”¶æ“ä½œã€‚</li>
<li>å¦‚æœå¤šä¸ª<code>case</code>åŒæ—¶æ»¡è¶³ï¼Œ<code>select</code>ä¼šéšæœºé€‰æ‹©ä¸€ä¸ªã€‚</li>
<li>å¯¹äºæ²¡æœ‰<code>case</code>çš„<code>select{}</code>ä¼šä¸€ç›´ç­‰å¾…ï¼Œå¯ç”¨äºé˜»å¡mainå‡½æ•°ã€‚</li>
</ul>
<h3 id="å¹¶å‘å®‰å…¨å’Œé”">å¹¶å‘å®‰å…¨å’Œé”</h3>
<p>æœ‰æ—¶å€™åœ¨Goä»£ç ä¸­å¯èƒ½ä¼šå­˜åœ¨å¤šä¸ª<code>goroutine</code>åŒæ—¶æ“ä½œä¸€ä¸ªèµ„æºï¼ˆä¸´ç•ŒåŒºï¼‰ï¼Œè¿™ç§æƒ…å†µä¼šå‘ç”Ÿ<code>ç«æ€é—®é¢˜</code>ï¼ˆæ•°æ®ç«æ€ï¼‰ã€‚ç±»æ¯”ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­æœ‰åå­—è·¯å£è¢«å„ä¸ªæ–¹å‘çš„çš„æ±½è½¦ç«äº‰ï¼›è¿˜æœ‰ç«è½¦ä¸Šçš„å«ç”Ÿé—´è¢«è½¦å¢é‡Œçš„äººç«äº‰ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;sync&#34;</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int64</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">50000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">2</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">add</span>()
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">add</span>()
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">x</span>)
}

</code></pre></div><p>ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¼€å¯äº†ä¸¤ä¸ª<code>goroutine</code>å»ç´¯åŠ å˜é‡xçš„å€¼ï¼Œè¿™ä¸¤ä¸ª<code>goroutine</code>åœ¨è®¿é—®å’Œä¿®æ”¹<code>x</code>å˜é‡çš„æ—¶å€™å°±ä¼šå­˜åœ¨æ•°æ®ç«äº‰ï¼Œå¯¼è‡´æœ€åçš„ç»“æœä¸æœŸå¾…çš„ä¸ç¬¦ã€‚</p>
<h4 id="äº’æ–¥é”">äº’æ–¥é”</h4>
<p>äº’æ–¥é”æ˜¯ä¸€ç§å¸¸ç”¨çš„æ§åˆ¶å…±äº«èµ„æºè®¿é—®çš„æ–¹æ³•ï¼Œå®ƒèƒ½å¤Ÿä¿è¯åŒæ—¶åªæœ‰ä¸€ä¸ª<code>goroutine</code>å¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚Goè¯­è¨€ä¸­ä½¿ç”¨<code>sync</code>åŒ…çš„<code>Mutex</code>ç±»å‹æ¥å®ç°äº’æ–¥é”ã€‚ ä½¿ç”¨äº’æ–¥é”æ¥ä¿®å¤ä¸Šé¢ä»£ç çš„é—®é¢˜ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;sync&#34;</span>
)

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int64</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">lock</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">50000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Lock</span>() <span style="color:#75715e">//ä¸Šé”
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
		<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Unlock</span>() <span style="color:#75715e">//è§£é”
</span><span style="color:#75715e"></span>	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">2</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">add</span>()
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">add</span>()
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">x</span>)
}
</code></pre></div><p>ä½¿ç”¨äº’æ–¥é”èƒ½å¤Ÿä¿è¯åŒä¸€æ—¶é—´æœ‰ä¸”åªæœ‰ä¸€ä¸ª<code>goroutine</code>è¿›å…¥ä¸´ç•ŒåŒºï¼Œå…¶ä»–çš„<code>goroutine</code>åˆ™åœ¨ç­‰å¾…é”ï¼›å½“äº’æ–¥é”é‡Šæ”¾åï¼Œç­‰å¾…çš„<code>goroutine</code>æ‰å¯ä»¥è·å–é”è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¤šä¸ª<code>goroutine</code>åŒæ—¶ç­‰å¾…ä¸€ä¸ªé”æ—¶ï¼Œå”¤é†’çš„ç­–ç•¥æ˜¯éšæœºçš„ã€‚</p>
<h4 id="è¯»å†™äº’æ–¥é”">è¯»å†™äº’æ–¥é”</h4>
<p>äº’æ–¥é”æ˜¯å®Œå…¨äº’æ–¥çš„ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šå®é™…çš„åœºæ™¯ä¸‹æ˜¯è¯»å¤šå†™å°‘çš„ï¼Œå½“æˆ‘ä»¬å¹¶å‘çš„å»è¯»å–ä¸€ä¸ªèµ„æºä¸æ¶‰åŠèµ„æºä¿®æ”¹çš„æ—¶å€™æ˜¯æ²¡æœ‰å¿…è¦åŠ é”çš„ï¼Œè¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨è¯»å†™é”æ˜¯æ›´å¥½çš„ä¸€ç§é€‰æ‹©ã€‚è¯»å†™é”åœ¨Goè¯­è¨€ä¸­ä½¿ç”¨<code>sync</code>åŒ…ä¸­çš„<code>RWMutex</code>ç±»å‹ã€‚</p>
<p>è¯»å†™é”åˆ†ä¸ºä¸¤ç§ï¼šè¯»é”å’Œå†™é”ã€‚å½“ä¸€ä¸ªgoroutineè·å–è¯»é”ä¹‹åï¼Œå…¶ä»–çš„<code>goroutine</code>å¦‚æ˜¯è·å–è¯»é”ä¼šç»§ç»­è·å¾—é”ï¼Œå¦‚æœæ˜¯è·å–å†™é”å°±ä¼šç­‰å¾…ï¼›å½“ä¸€ä¸ª<code>goroutine</code>è·å–å†™é”ä¹‹åï¼Œå…¶ä»–çš„<code>goroutine</code>æ— è®ºæ˜¯è·å–è¯»é”è¿˜æ˜¯å†™é”éƒ½ä¼šç­‰å¾…ã€‚</p>
<p>è¯»å†™é”ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> (
	<span style="color:#a6e22e">x</span>      <span style="color:#66d9ef">int64</span>
	<span style="color:#a6e22e">wg</span>     <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>
	<span style="color:#75715e">//lock   sync.Mutex
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">rwlock</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">RWMutex</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">write</span>() {
	<span style="color:#75715e">// lock.Lock()   // åŠ äº’æ–¥é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">rwlock</span>.<span style="color:#a6e22e">Lock</span>() <span style="color:#75715e">// åŠ å†™é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">10</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>) <span style="color:#75715e">// å‡è®¾è¯»æ“ä½œè€—æ—¶10æ¯«ç§’
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">rwlock</span>.<span style="color:#a6e22e">Unlock</span>()                   <span style="color:#75715e">// è§£å†™é”
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// lock.Unlock()                     // è§£äº’æ–¥é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">read</span>() {
	<span style="color:#75715e">// lock.Lock()                  // åŠ äº’æ–¥é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">rwlock</span>.<span style="color:#a6e22e">RLock</span>()               <span style="color:#75715e">// åŠ è¯»é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Millisecond</span>) <span style="color:#75715e">// å‡è®¾è¯»æ“ä½œè€—æ—¶1æ¯«ç§’
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">rwlock</span>.<span style="color:#a6e22e">RUnlock</span>()             <span style="color:#75715e">// è§£è¯»é”
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// lock.Unlock()                // è§£äº’æ–¥é”
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
		<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">write</span>()
	}

	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">1000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
		<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">read</span>()
	}

	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
	<span style="color:#a6e22e">end</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">end</span>.<span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">start</span>))
}
</code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯è¯»å†™é”éå¸¸é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œå¦‚æœè¯»å’Œå†™çš„æ“ä½œå·®åˆ«ä¸å¤§ï¼Œè¯»å†™é”çš„ä¼˜åŠ¿å°±å‘æŒ¥ä¸å‡ºæ¥ã€‚</p>
<h4 id="syncwaitgroup">sync.WaitGroup</h4>
<p>åœ¨ä»£ç ä¸­ç”Ÿç¡¬çš„ä½¿ç”¨<code>time.Sleep</code>è‚¯å®šæ˜¯ä¸åˆé€‚çš„ï¼ŒGoè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨<code>sync.WaitGroup</code>æ¥å®ç°å¹¶å‘ä»»åŠ¡çš„åŒæ­¥ã€‚ <code>sync.WaitGroup</code>æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•å</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(wg * WaitGroup) Add(delta int)</td>
<td style="text-align:center">è®¡æ•°å™¨+delta</td>
</tr>
<tr>
<td style="text-align:center">(wg *WaitGroup) Done()</td>
<td style="text-align:center">è®¡æ•°å™¨-1</td>
</tr>
<tr>
<td style="text-align:center">(wg *WaitGroup) Wait()</td>
<td style="text-align:center">é˜»å¡ç›´åˆ°è®¡æ•°å™¨å˜ä¸º0</td>
</tr>
</tbody>
</table>
<p><code>sync.WaitGroup</code>å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®¡æ•°å™¨çš„å€¼å¯ä»¥å¢åŠ å’Œå‡å°‘ã€‚ä¾‹å¦‚å½“æˆ‘ä»¬å¯åŠ¨äº†N ä¸ªå¹¶å‘ä»»åŠ¡æ—¶ï¼Œå°±å°†è®¡æ•°å™¨å€¼å¢åŠ Nã€‚æ¯ä¸ªä»»åŠ¡å®Œæˆæ—¶é€šè¿‡è°ƒç”¨Done()æ–¹æ³•å°†è®¡æ•°å™¨å‡1ã€‚é€šè¿‡è°ƒç”¨Wait()æ¥ç­‰å¾…å¹¶å‘ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå½“è®¡æ•°å™¨å€¼ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰å¹¶å‘ä»»åŠ¡å·²ç»å®Œæˆã€‚</p>
<p>æˆ‘ä»¬åˆ©ç”¨<code>sync.WaitGroup</code>å°†ä¸Šé¢çš„ä»£ç ä¼˜åŒ–ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">hello</span>() {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello Goroutine!&#34;</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
	<span style="color:#66d9ef">go</span> <span style="color:#a6e22e">hello</span>() <span style="color:#75715e">// å¯åŠ¨å¦å¤–ä¸€ä¸ªgoroutineå»æ‰§è¡Œhelloå‡½æ•°
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;main goroutine done!&#34;</span>)
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
}
</code></pre></div><p>éœ€è¦æ³¨æ„<code>sync.WaitGroup</code>æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¼ é€’çš„æ—¶å€™è¦ä¼ é€’æŒ‡é’ˆã€‚</p>
<h4 id="synconce">sync.Once</h4>
<p>è¯´åœ¨å‰é¢çš„è¯ï¼šè¿™æ˜¯ä¸€ä¸ªè¿›é˜¶çŸ¥è¯†ç‚¹ã€‚</p>
<p>åœ¨ç¼–ç¨‹çš„å¾ˆå¤šåœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦ç¡®ä¿æŸäº›æ“ä½œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¾‹å¦‚åªåŠ è½½ä¸€æ¬¡é…ç½®æ–‡ä»¶ã€åªå…³é—­ä¸€æ¬¡é€šé“ç­‰ã€‚</p>
<p>Goè¯­è¨€ä¸­çš„<code>sync</code>åŒ…ä¸­æä¾›äº†ä¸€ä¸ªé’ˆå¯¹åªæ‰§è¡Œä¸€æ¬¡åœºæ™¯çš„è§£å†³æ–¹æ¡ˆâ€“<code>sync.Once</code>ã€‚</p>
<p><code>sync.Once</code>åªæœ‰ä¸€ä¸ª<code>Do</code>æ–¹æ³•ï¼Œå…¶ç­¾åå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">o</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Once</span>) <span style="color:#a6e22e">Do</span>(<span style="color:#a6e22e">f</span> <span style="color:#66d9ef">func</span>()) {}
</code></pre></div><p><em>å¤‡æ³¨ï¼šå¦‚æœè¦æ‰§è¡Œçš„å‡½æ•°<code>f</code>éœ€è¦ä¼ é€’å‚æ•°å°±éœ€è¦æ­é…é—­åŒ…æ¥ä½¿ç”¨ã€‚</em></p>
<h5 id="åŠ è½½é…ç½®æ–‡ä»¶ç¤ºä¾‹">åŠ è½½é…ç½®æ–‡ä»¶ç¤ºä¾‹</h5>
<p>å»¶è¿Ÿä¸€ä¸ªå¼€é”€å¾ˆå¤§çš„åˆå§‹åŒ–æ“ä½œåˆ°çœŸæ­£ç”¨åˆ°å®ƒçš„æ—¶å€™å†æ‰§è¡Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µã€‚å› ä¸ºé¢„å…ˆåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼ˆæ¯”å¦‚åœ¨initå‡½æ•°ä¸­å®Œæˆåˆå§‹åŒ–ï¼‰ä¼šå¢åŠ ç¨‹åºçš„å¯åŠ¨è€—æ—¶ï¼Œè€Œä¸”æœ‰å¯èƒ½å®é™…æ‰§è¡Œè¿‡ç¨‹ä¸­è¿™ä¸ªå˜é‡æ²¡æœ‰ç”¨ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªåˆå§‹åŒ–æ“ä½œå°±ä¸æ˜¯å¿…é¡»è¦åšçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">icons</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">loadIcons</span>() {
	<span style="color:#a6e22e">icons</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span>{
		<span style="color:#e6db74">&#34;left&#34;</span>:  <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;left.png&#34;</span>),
		<span style="color:#e6db74">&#34;up&#34;</span>:    <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;up.png&#34;</span>),
		<span style="color:#e6db74">&#34;right&#34;</span>: <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;right.png&#34;</span>),
		<span style="color:#e6db74">&#34;down&#34;</span>:  <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;down.png&#34;</span>),
	}
}

<span style="color:#75715e">// Icon è¢«å¤šä¸ªgoroutineè°ƒç”¨æ—¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Icon</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span> {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">icons</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
		<span style="color:#a6e22e">loadIcons</span>()
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">icons</span>[<span style="color:#a6e22e">name</span>]
}
</code></pre></div><p>å¤šä¸ª<code>goroutine</code>å¹¶å‘è°ƒç”¨Iconå‡½æ•°æ—¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œç°ä»£çš„ç¼–è¯‘å™¨å’ŒCPUå¯èƒ½ä¼šåœ¨ä¿è¯æ¯ä¸ª<code>goroutine</code>éƒ½æ»¡è¶³ä¸²è¡Œä¸€è‡´çš„åŸºç¡€ä¸Šè‡ªç”±åœ°é‡æ’è®¿é—®å†…å­˜çš„é¡ºåºã€‚loadIconså‡½æ•°å¯èƒ½ä¼šè¢«é‡æ’ä¸ºä»¥ä¸‹ç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">loadIcons</span>() {
	<span style="color:#a6e22e">icons</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span>)
	<span style="color:#a6e22e">icons</span>[<span style="color:#e6db74">&#34;left&#34;</span>] = <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;left.png&#34;</span>)
	<span style="color:#a6e22e">icons</span>[<span style="color:#e6db74">&#34;up&#34;</span>] = <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;up.png&#34;</span>)
	<span style="color:#a6e22e">icons</span>[<span style="color:#e6db74">&#34;right&#34;</span>] = <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;right.png&#34;</span>)
	<span style="color:#a6e22e">icons</span>[<span style="color:#e6db74">&#34;down&#34;</span>] = <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;down.png&#34;</span>)
}
</code></pre></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹å°±ä¼šå‡ºç°å³ä½¿åˆ¤æ–­äº†<code>icons</code>ä¸æ˜¯nilä¹Ÿä¸æ„å‘³ç€å˜é‡åˆå§‹åŒ–å®Œæˆäº†ã€‚è€ƒè™‘åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬èƒ½æƒ³åˆ°çš„åŠæ³•å°±æ˜¯æ·»åŠ äº’æ–¥é”ï¼Œä¿è¯åˆå§‹åŒ–<code>icons</code>çš„æ—¶å€™ä¸ä¼šè¢«å…¶ä»–çš„<code>goroutine</code>æ“ä½œï¼Œä½†æ˜¯è¿™æ ·åšåˆä¼šå¼•å‘æ€§èƒ½é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨<code>sync.Once</code>æ”¹é€ çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">icons</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span>

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">loadIconsOnce</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Once</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">loadIcons</span>() {
	<span style="color:#a6e22e">icons</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span>{
		<span style="color:#e6db74">&#34;left&#34;</span>:  <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;left.png&#34;</span>),
		<span style="color:#e6db74">&#34;up&#34;</span>:    <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;up.png&#34;</span>),
		<span style="color:#e6db74">&#34;right&#34;</span>: <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;right.png&#34;</span>),
		<span style="color:#e6db74">&#34;down&#34;</span>:  <span style="color:#a6e22e">loadIcon</span>(<span style="color:#e6db74">&#34;down.png&#34;</span>),
	}
}

<span style="color:#75715e">// Icon æ˜¯å¹¶å‘å®‰å…¨çš„
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Icon</span>(<span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>) <span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">Image</span> {
	<span style="color:#a6e22e">loadIconsOnce</span>.<span style="color:#a6e22e">Do</span>(<span style="color:#a6e22e">loadIcons</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">icons</span>[<span style="color:#a6e22e">name</span>]
}
</code></pre></div><h5 id="å¹¶å‘å®‰å…¨çš„å•ä¾‹æ¨¡å¼">å¹¶å‘å®‰å…¨çš„å•ä¾‹æ¨¡å¼</h5>
<p>ä¸‹é¢æ˜¯å€ŸåŠ©<code>sync.Once</code>å®ç°çš„å¹¶å‘å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">singleton</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;sync&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">singleton</span> <span style="color:#66d9ef">struct</span> {}

<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">instance</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">singleton</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">once</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Once</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">GetInstance</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">singleton</span> {
    <span style="color:#a6e22e">once</span>.<span style="color:#a6e22e">Do</span>(<span style="color:#66d9ef">func</span>() {
        <span style="color:#a6e22e">instance</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">singleton</span>{}
    })
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">instance</span>
}
</code></pre></div><p><code>sync.Once</code>å…¶å®å†…éƒ¨åŒ…å«ä¸€ä¸ªäº’æ–¥é”å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œäº’æ–¥é”ä¿è¯å¸ƒå°”å€¼å’Œæ•°æ®çš„å®‰å…¨ï¼Œè€Œå¸ƒå°”å€¼ç”¨æ¥è®°å½•åˆå§‹åŒ–æ˜¯å¦å®Œæˆã€‚è¿™æ ·è®¾è®¡å°±èƒ½ä¿è¯åˆå§‹åŒ–æ“ä½œçš„æ—¶å€™æ˜¯å¹¶å‘å®‰å…¨çš„å¹¶ä¸”åˆå§‹åŒ–æ“ä½œä¹Ÿä¸ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ã€‚</p>
<h4 id="syncmap">sync.Map</h4>
<p>Goè¯­è¨€ä¸­å†…ç½®çš„mapä¸æ˜¯å¹¶å‘å®‰å…¨çš„ã€‚è¯·çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>]
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">value</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">wg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>{}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">20</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
		<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>) {
			<span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strconv</span>.<span style="color:#a6e22e">Itoa</span>(<span style="color:#a6e22e">n</span>)
			<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">n</span>)
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;k=:%v,v:=%v\n&#34;</span>, <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>))
			<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
		}(<span style="color:#a6e22e">i</span>)
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
}
</code></pre></div><p>ä¸Šé¢çš„ä»£ç å¼€å¯å°‘é‡å‡ ä¸ª<code>goroutine</code>çš„æ—¶å€™å¯èƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå½“å¹¶å‘å¤šäº†ä¹‹åæ‰§è¡Œä¸Šé¢çš„ä»£ç å°±ä¼šæŠ¥<code>fatal error: concurrent map writes</code>é”™è¯¯ã€‚</p>
<p>åƒè¿™ç§åœºæ™¯ä¸‹å°±éœ€è¦ä¸ºmapåŠ é”æ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§äº†ï¼ŒGoè¯­è¨€çš„<code>sync</code>åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹¶å‘å®‰å…¨ç‰ˆmapâ€“<code>sync.Map</code>ã€‚å¼€ç®±å³ç”¨ä¸ç”¨åƒå†…ç½®çš„mapä¸€æ ·ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–å°±èƒ½ç›´æ¥ä½¿ç”¨ã€‚åŒæ—¶<code>sync.Map</code>å†…ç½®äº†è¯¸å¦‚<code>Store</code>ã€<code>Load</code>ã€<code>LoadOrStore</code>ã€<code>Delete</code>ã€<code>Range</code>ç­‰æ“ä½œæ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> = <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Map</span>{}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">wg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>{}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">20</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
		<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>) {
			<span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strconv</span>.<span style="color:#a6e22e">Itoa</span>(<span style="color:#a6e22e">n</span>)
			<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">Store</span>(<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">n</span>)
			<span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">Load</span>(<span style="color:#a6e22e">key</span>)
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;k=:%v,v:=%v\n&#34;</span>, <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>)
			<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
		}(<span style="color:#a6e22e">i</span>)
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
}
</code></pre></div><h3 id="åŸå­æ“ä½œ">åŸå­æ“ä½œ</h3>
<p>ä»£ç ä¸­çš„åŠ é”æ“ä½œå› ä¸ºæ¶‰åŠå†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæ¯”è¾ƒè€—æ—¶ã€ä»£ä»·æ¯”è¾ƒé«˜ã€‚é’ˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŸå­æ“ä½œæ¥ä¿è¯å¹¶å‘å®‰å…¨ï¼Œå› ä¸ºåŸå­æ“ä½œæ˜¯Goè¯­è¨€æä¾›çš„æ–¹æ³•å®ƒåœ¨ç”¨æˆ·æ€å°±å¯ä»¥å®Œæˆï¼Œå› æ­¤æ€§èƒ½æ¯”åŠ é”æ“ä½œæ›´å¥½ã€‚Goè¯­è¨€ä¸­åŸå­æ“ä½œç”±å†…ç½®çš„æ ‡å‡†åº“<code>sync/atomic</code>æä¾›ã€‚</p>
<h4 id="ç¤ºä¾‹">ç¤ºä¾‹</h4>
<p>æˆ‘ä»¬å¡«å†™ä¸€ä¸ªç¤ºä¾‹æ¥æ¯”è¾ƒä¸‹äº’æ–¥é”å’ŒåŸå­æ“ä½œçš„æ€§èƒ½ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;sync&#34;</span>
	<span style="color:#e6db74">&#34;sync/atomic&#34;</span>
	<span style="color:#e6db74">&#34;time&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Counter</span> <span style="color:#66d9ef">interface</span> {
	<span style="color:#a6e22e">Inc</span>()
	<span style="color:#a6e22e">Load</span>() <span style="color:#66d9ef">int64</span>
}

<span style="color:#75715e">// æ™®é€šç‰ˆ
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">CommonCounter</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">counter</span> <span style="color:#66d9ef">int64</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">CommonCounter</span>) <span style="color:#a6e22e">Inc</span>() {
	<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">counter</span><span style="color:#f92672">++</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">CommonCounter</span>) <span style="color:#a6e22e">Load</span>() <span style="color:#66d9ef">int64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">counter</span>
}

<span style="color:#75715e">// äº’æ–¥é”ç‰ˆ
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MutexCounter</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">counter</span> <span style="color:#66d9ef">int64</span>
	<span style="color:#a6e22e">lock</span>    <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">Mutex</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MutexCounter</span>) <span style="color:#a6e22e">Inc</span>() {
	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Lock</span>()
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Unlock</span>()
	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">counter</span><span style="color:#f92672">++</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MutexCounter</span>) <span style="color:#a6e22e">Load</span>() <span style="color:#66d9ef">int64</span> {
	<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Lock</span>()
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">lock</span>.<span style="color:#a6e22e">Unlock</span>()
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">counter</span>
}

<span style="color:#75715e">// åŸå­æ“ä½œç‰ˆ
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">AtomicCounter</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">counter</span> <span style="color:#66d9ef">int64</span>
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AtomicCounter</span>) <span style="color:#a6e22e">Inc</span>() {
	<span style="color:#a6e22e">atomic</span>.<span style="color:#a6e22e">AddInt64</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">counter</span>, <span style="color:#ae81ff">1</span>)
}

<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">AtomicCounter</span>) <span style="color:#a6e22e">Load</span>() <span style="color:#66d9ef">int64</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">atomic</span>.<span style="color:#a6e22e">LoadInt64</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">counter</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">Counter</span>) {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">wg</span> <span style="color:#a6e22e">sync</span>.<span style="color:#a6e22e">WaitGroup</span>
	<span style="color:#a6e22e">start</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">1000</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Add</span>(<span style="color:#ae81ff">1</span>)
		<span style="color:#66d9ef">go</span> <span style="color:#66d9ef">func</span>() {
			<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Inc</span>()
			<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Done</span>()
		}()
	}
	<span style="color:#a6e22e">wg</span>.<span style="color:#a6e22e">Wait</span>()
	<span style="color:#a6e22e">end</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">Load</span>(), <span style="color:#a6e22e">end</span>.<span style="color:#a6e22e">Sub</span>(<span style="color:#a6e22e">start</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">c1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">CommonCounter</span>{} <span style="color:#75715e">// éå¹¶å‘å®‰å…¨
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">test</span>(<span style="color:#a6e22e">c1</span>)
	<span style="color:#a6e22e">c2</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">MutexCounter</span>{} <span style="color:#75715e">// ä½¿ç”¨äº’æ–¥é”å®ç°å¹¶å‘å®‰å…¨
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">test</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">c2</span>)
	<span style="color:#a6e22e">c3</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">AtomicCounter</span>{} <span style="color:#75715e">// å¹¶å‘å®‰å…¨ä¸”æ¯”äº’æ–¥é”æ•ˆç‡æ›´é«˜
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">test</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">c3</span>)
}
</code></pre></div><p><code>atomic</code>åŒ…æä¾›äº†åº•å±‚çš„åŸå­çº§å†…å­˜æ“ä½œï¼Œå¯¹äºåŒæ­¥ç®—æ³•çš„å®ç°å¾ˆæœ‰ç”¨ã€‚è¿™äº›å‡½æ•°å¿…é¡»è°¨æ…åœ°ä¿è¯æ­£ç¡®ä½¿ç”¨ã€‚é™¤äº†æŸäº›ç‰¹æ®Šçš„åº•å±‚åº”ç”¨ï¼Œä½¿ç”¨é€šé“æˆ–è€…syncåŒ…çš„ç±»å‹/ç±»å‹å®ç°åŒæ­¥æ›´å¥½</p>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹æ•°ç»„</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%95%B0%E7%BB%84/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E6%95%B0%E7%BB%84/</guid>
      <description>Goæ•°ç»„</description>
      <content:encoded><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»Goè¯­è¨€ä¸­æ•°ç»„ï¼ˆarrayï¼‰åŠå®ƒçš„åŸºæœ¬ä½¿ç”¨ã€‚</p>
<h1 id="arrayæ•°ç»„">Array(æ•°ç»„)</h1>
<p>æ•°ç»„æ˜¯åŒä¸€ç§æ•°æ®ç±»å‹å…ƒç´ çš„é›†åˆã€‚ åœ¨Goè¯­è¨€ä¸­ï¼Œæ•°ç»„ä»å£°æ˜æ—¶å°±ç¡®å®šï¼Œä½¿ç”¨æ—¶å¯ä»¥ä¿®æ”¹æ•°ç»„æˆå‘˜ï¼Œä½†æ˜¯æ•°ç»„å¤§å°ä¸å¯å˜åŒ–ã€‚ åŸºæœ¬è¯­æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º3å…ƒç´ ç±»å‹ä¸ºintçš„æ•°ç»„a
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>
</code></pre></div><h3 id="æ•°ç»„å®šä¹‰">æ•°ç»„å®šä¹‰ï¼š</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">var æ•°ç»„å˜é‡å <span style="color:#f92672">[</span>å…ƒç´ æ•°é‡<span style="color:#f92672">]</span>T
</code></pre></div><p>æ¯”å¦‚ï¼š<code>var a [5]int</code>ï¼Œ æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯å¸¸é‡ï¼Œå¹¶ä¸”é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚ä¸€æ—¦å®šä¹‰ï¼Œé•¿åº¦ä¸èƒ½å˜ã€‚ <code>[5]int</code>å’Œ<code>[10]int</code>æ˜¯ä¸åŒçš„ç±»å‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> [<span style="color:#ae81ff">4</span>]<span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">a</span> = <span style="color:#a6e22e">b</span> <span style="color:#75715e">//ä¸å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºæ­¤æ—¶aå’Œbæ˜¯ä¸åŒçš„ç±»å‹
</span></code></pre></div><p>æ•°ç»„å¯ä»¥é€šè¿‡ä¸‹æ ‡è¿›è¡Œè®¿é—®ï¼Œä¸‹æ ‡æ˜¯ä»<code>0</code>å¼€å§‹ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¸‹æ ‡æ˜¯ï¼š<code>len-1</code>ï¼Œè®¿é—®è¶Šç•Œï¼ˆä¸‹æ ‡åœ¨åˆæ³•èŒƒå›´ä¹‹å¤–ï¼‰ï¼Œåˆ™è§¦å‘è®¿é—®è¶Šç•Œï¼Œä¼španicã€‚</p>
<h3 id="æ•°ç»„çš„åˆå§‹åŒ–">æ•°ç»„çš„åˆå§‹åŒ–</h3>
<p>æ•°ç»„çš„åˆå§‹åŒ–ä¹Ÿæœ‰å¾ˆå¤šæ–¹å¼ã€‚</p>
<h4 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h4>
<p>åˆå§‹åŒ–æ•°ç»„æ—¶å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥è®¾ç½®æ•°ç»„å…ƒç´ çš„å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">testArray</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>                        <span style="color:#75715e">//æ•°ç»„ä¼šåˆå§‹åŒ–ä¸ºintç±»å‹çš„é›¶å€¼
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">numArray</span> = [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>}                 <span style="color:#75715e">//ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å€¼å®Œæˆåˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cityArray</span> = [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>} <span style="color:#75715e">//ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å€¼å®Œæˆåˆå§‹åŒ–
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">testArray</span>)                      <span style="color:#75715e">//[0 0 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">numArray</span>)                       <span style="color:#75715e">//[1 2 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">cityArray</span>)                      <span style="color:#75715e">//[åŒ—äº¬ ä¸Šæµ· æ·±åœ³]
</span><span style="color:#75715e"></span>}
</code></pre></div><h4 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h4>
<p>æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ¯æ¬¡éƒ½è¦ç¡®ä¿æä¾›çš„åˆå§‹å€¼å’Œæ•°ç»„é•¿åº¦ä¸€è‡´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨æ ¹æ®åˆå§‹å€¼çš„ä¸ªæ•°è‡ªè¡Œæ¨æ–­æ•°ç»„çš„é•¿åº¦ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">testArray</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">numArray</span> = [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>}
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">cityArray</span> = [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">testArray</span>)                          <span style="color:#75715e">//[0 0 0]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">numArray</span>)                           <span style="color:#75715e">//[1 2]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type of numArray:%T\n&#34;</span>, <span style="color:#a6e22e">numArray</span>)   <span style="color:#75715e">//type of numArray:[2]int
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">cityArray</span>)                          <span style="color:#75715e">//[åŒ—äº¬ ä¸Šæµ· æ·±åœ³]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type of cityArray:%T\n&#34;</span>, <span style="color:#a6e22e">cityArray</span>) <span style="color:#75715e">//type of cityArray:[3]string
</span><span style="color:#75715e"></span>}
</code></pre></div><h4 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰</h4>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æŒ‡å®šç´¢å¼•å€¼çš„æ–¹å¼æ¥åˆå§‹åŒ–æ•°ç»„ï¼Œä¾‹å¦‚:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>: <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>: <span style="color:#ae81ff">5</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>)                  <span style="color:#75715e">// [0 1 0 5]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;type of a:%T\n&#34;</span>, <span style="color:#a6e22e">a</span>) <span style="color:#75715e">//type of a:[4]int
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="æ•°ç»„çš„éå†">æ•°ç»„çš„éå†</h3>
<p>éå†æ•°ç»„aæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> = [<span style="color:#f92672">...</span>]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>}
	<span style="color:#75715e">// æ–¹æ³•1ï¼šforå¾ªç¯éå†
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; len(<span style="color:#a6e22e">a</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">i</span>])
	}

	<span style="color:#75715e">// æ–¹æ³•2ï¼šfor rangeéå†
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">a</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span>)
	}
}
</code></pre></div><h3 id="å¤šç»´æ•°ç»„">å¤šç»´æ•°ç»„</h3>
<p>Goè¯­è¨€æ˜¯æ”¯æŒå¤šç»´æ•°ç»„çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä»¥äºŒç»´æ•°ç»„ä¸ºä¾‹ï¼ˆæ•°ç»„ä¸­åˆåµŒå¥—æ•°ç»„ï¼‰ã€‚</p>
<h3 id="äºŒç»´æ•°ç»„çš„å®šä¹‰">äºŒç»´æ•°ç»„çš„å®šä¹‰</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">2</span>]<span style="color:#66d9ef">string</span>{
		{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>},
		{<span style="color:#e6db74">&#34;å¹¿å·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>},
		{<span style="color:#e6db74">&#34;æˆéƒ½&#34;</span>, <span style="color:#e6db74">&#34;é‡åº†&#34;</span>},
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[[åŒ—äº¬ ä¸Šæµ·] [å¹¿å· æ·±åœ³] [æˆéƒ½ é‡åº†]]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">1</span>]) <span style="color:#75715e">//æ”¯æŒç´¢å¼•å–å€¼:é‡åº†
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="äºŒç»´æ•°ç»„çš„éå†">äºŒç»´æ•°ç»„çš„éå†</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">2</span>]<span style="color:#66d9ef">string</span>{
		{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>},
		{<span style="color:#e6db74">&#34;å¹¿å·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>},
		{<span style="color:#e6db74">&#34;æˆéƒ½&#34;</span>, <span style="color:#e6db74">&#34;é‡åº†&#34;</span>},
	}
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v1</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">a</span> {
		<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v2</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">v1</span> {
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s\t&#34;</span>, <span style="color:#a6e22e">v2</span>)
		}
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>()
	}
}
</code></pre></div><p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">åŒ—äº¬	ä¸Šæµ·	
å¹¿å·	æ·±åœ³	
æˆéƒ½	é‡åº†	
</code></pre></div><p><strong>æ³¨æ„ï¼š</strong> å¤šç»´æ•°ç»„<strong>åªæœ‰ç¬¬ä¸€å±‚</strong>å¯ä»¥ä½¿ç”¨<code>...</code>æ¥è®©ç¼–è¯‘å™¨æ¨å¯¼æ•°ç»„é•¿åº¦ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">//æ”¯æŒçš„å†™æ³•
</span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#f92672">...</span>][<span style="color:#ae81ff">2</span>]<span style="color:#66d9ef">string</span>{
	{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>},
	{<span style="color:#e6db74">&#34;å¹¿å·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>},
	{<span style="color:#e6db74">&#34;æˆéƒ½&#34;</span>, <span style="color:#e6db74">&#34;é‡åº†&#34;</span>},
}
<span style="color:#75715e">//ä¸æ”¯æŒå¤šç»´æ•°ç»„çš„å†…å±‚ä½¿ç”¨...
</span><span style="color:#75715e"></span><span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>][<span style="color:#f92672">...</span>]<span style="color:#66d9ef">string</span>{
	{<span style="color:#e6db74">&#34;åŒ—äº¬&#34;</span>, <span style="color:#e6db74">&#34;ä¸Šæµ·&#34;</span>},
	{<span style="color:#e6db74">&#34;å¹¿å·&#34;</span>, <span style="color:#e6db74">&#34;æ·±åœ³&#34;</span>},
	{<span style="color:#e6db74">&#34;æˆéƒ½&#34;</span>, <span style="color:#e6db74">&#34;é‡åº†&#34;</span>},
}
</code></pre></div><h3 id="æ•°ç»„æ˜¯å€¼ç±»å‹">æ•°ç»„æ˜¯å€¼ç±»å‹</h3>
<p>æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œèµ‹å€¼å’Œä¼ å‚ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ã€‚å› æ­¤æ”¹å˜å‰¯æœ¬çš„å€¼ï¼Œä¸ä¼šæ”¹å˜æœ¬èº«çš„å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">modifyArray</span>(<span style="color:#a6e22e">x</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">100</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">modifyArray2</span>(<span style="color:#a6e22e">x</span> [<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">2</span>]<span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">100</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">30</span>}
	<span style="color:#a6e22e">modifyArray</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//åœ¨modifyä¸­ä¿®æ”¹çš„æ˜¯açš„å‰¯æœ¬x
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>) <span style="color:#75715e">//[10 20 30]
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">2</span>]<span style="color:#66d9ef">int</span>{
		{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>},
		{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>},
		{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>},
	}
	<span style="color:#a6e22e">modifyArray2</span>(<span style="color:#a6e22e">b</span>) <span style="color:#75715e">//åœ¨modifyä¸­ä¿®æ”¹çš„æ˜¯bçš„å‰¯æœ¬x
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>)  <span style="color:#75715e">//[[1 1] [1 1] [1 1]]
</span><span style="color:#75715e"></span>}
</code></pre></div><p><strong>æ³¨æ„ï¼š</strong></p>
<ol>
<li>æ•°ç»„æ”¯æŒ â€œ==â€œã€â€!=â€ æ“ä½œç¬¦ï¼Œå› ä¸ºå†…å­˜æ€»æ˜¯è¢«åˆå§‹åŒ–è¿‡çš„ã€‚</li>
<li><code>[n]*T</code>è¡¨ç¤ºæŒ‡é’ˆæ•°ç»„ï¼Œ<code>*[n]T</code>è¡¨ç¤ºæ•°ç»„æŒ‡é’ˆ ã€‚</li>
</ol>]]></content:encoded>
    </item>
    
    <item>
      <title>Goè¯­è¨€åŸºç¡€ä¹‹è¿ç®—ç¬¦</title>
      <link>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.niuwx.cn/posts/golang/go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B9%8B%E8%BF%90%E7%AE%97%E7%AC%A6/</guid>
      <description>Goè¿ç®—ç¬¦</description>
      <content:encoded><![CDATA[<p>è¿ç®—ç¬¦ç”¨äºåœ¨ç¨‹åºè¿è¡Œæ—¶æ‰§è¡Œæ•°å­¦æˆ–é€»è¾‘è¿ç®—ã€‚</p>
<p>Go è¯­è¨€å†…ç½®çš„è¿ç®—ç¬¦æœ‰äº”ç±»ï¼š</p>
<ol>
<li>ç®—æœ¯è¿ç®—ç¬¦</li>
<li>å…³ç³»è¿ç®—ç¬¦</li>
<li>é€»è¾‘è¿ç®—ç¬¦</li>
<li>ä½è¿ç®—ç¬¦</li>
<li>èµ‹å€¼è¿ç®—ç¬¦</li>
</ol>
<h4 id="ç®—æ•°è¿ç®—ç¬¦">ç®—æ•°è¿ç®—ç¬¦</h4>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">ç›¸åŠ </td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">ç›¸å‡</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">ç›¸ä¹˜</td>
</tr>
<tr>
<td style="text-align:center">/</td>
<td style="text-align:center">ç›¸é™¤</td>
</tr>
<tr>
<td style="text-align:center">%</td>
<td style="text-align:center">æ±‚ä½™</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æ„ï¼š</strong> <code>++</code>ï¼ˆè‡ªå¢ï¼‰å’Œ<code>--</code>ï¼ˆè‡ªå‡ï¼‰åœ¨Goè¯­è¨€ä¸­æ˜¯å•ç‹¬çš„è¯­å¥ï¼Œå¹¶ä¸æ˜¯è¿ç®—ç¬¦ã€‚</p>
<h4 id="å…³ç³»è¿ç®—ç¬¦">å…³ç³»è¿ç®—ç¬¦</h4>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">==</td>
<td style="text-align:center">æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td style="text-align:center">æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">æ£€æŸ¥å·¦è¾¹å€¼æ˜¯å¦å¤§äºå³è¾¹å€¼ï¼Œå¦‚æœæ˜¯è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:center">æ£€æŸ¥å·¦è¾¹å€¼æ˜¯å¦å¤§äºç­‰äºå³è¾¹å€¼ï¼Œå¦‚æœæ˜¯è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">æ£€æŸ¥å·¦è¾¹å€¼æ˜¯å¦å°äºå³è¾¹å€¼ï¼Œå¦‚æœæ˜¯è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:center">æ£€æŸ¥å·¦è¾¹å€¼æ˜¯å¦å°äºç­‰äºå³è¾¹å€¼ï¼Œå¦‚æœæ˜¯è¿”å› True å¦åˆ™è¿”å› Falseã€‚</td>
</tr>
</tbody>
</table>
<h4 id="é€»è¾‘è¿ç®—ç¬¦">é€»è¾‘è¿ç®—ç¬¦</h4>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;&amp;</td>
<td style="text-align:center">é€»è¾‘ AND è¿ç®—ç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œæ•°éƒ½æ˜¯ Trueï¼Œåˆ™ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">||</td>
<td style="text-align:center">é€»è¾‘ OR è¿ç®—ç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œæ•°æœ‰ä¸€ä¸ª Trueï¼Œåˆ™ä¸º Trueï¼Œå¦åˆ™ä¸º Falseã€‚</td>
</tr>
<tr>
<td style="text-align:center">!</td>
<td style="text-align:center">é€»è¾‘ NOT è¿ç®—ç¬¦ã€‚ å¦‚æœæ¡ä»¶ä¸º Trueï¼Œåˆ™ä¸º Falseï¼Œå¦åˆ™ä¸º Trueã€‚</td>
</tr>
</tbody>
</table>
<h4 id="ä½è¿ç®—ç¬¦">ä½è¿ç®—ç¬¦</h4>
<p>ä½è¿ç®—ç¬¦å¯¹æ•´æ•°åœ¨å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œæ“ä½œã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&amp;</td>
<td style="text-align:center">å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸ä¸ã€‚ ï¼ˆä¸¤ä½å‡ä¸º1æ‰ä¸º1ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">|</td>
<td style="text-align:center">å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸æˆ–ã€‚ ï¼ˆä¸¤ä½æœ‰ä¸€ä¸ªä¸º1å°±ä¸º1ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æˆ–ï¼Œå½“ä¸¤å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æ—¶ï¼Œç»“æœä¸º1ã€‚ ï¼ˆä¸¤ä½ä¸ä¸€æ ·åˆ™ä¸º1ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">&laquo;</td>
<td style="text-align:center">å·¦ç§»nä½å°±æ˜¯ä¹˜ä»¥2çš„næ¬¡æ–¹ã€‚ â€œa&laquo;bâ€æ˜¯æŠŠaçš„å„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»bä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0ã€‚</td>
</tr>
<tr>
<td style="text-align:center">&raquo;</td>
<td style="text-align:center">å³ç§»nä½å°±æ˜¯é™¤ä»¥2çš„næ¬¡æ–¹ã€‚ â€œa&raquo;bâ€æ˜¯æŠŠaçš„å„äºŒè¿›ä½å…¨éƒ¨å³ç§»bä½ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="èµ‹å€¼è¿ç®—ç¬¦">èµ‹å€¼è¿ç®—ç¬¦</h4>
<table>
<thead>
<tr>
<th style="text-align:center">è¿ç®—ç¬¦</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td style="text-align:center">ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œå°†ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼èµ‹ç»™ä¸€ä¸ªå·¦å€¼</td>
</tr>
<tr>
<td style="text-align:center">+=</td>
<td style="text-align:center">ç›¸åŠ åå†èµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">-=</td>
<td style="text-align:center">ç›¸å‡åå†èµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">*=</td>
<td style="text-align:center">ç›¸ä¹˜åå†èµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">/=</td>
<td style="text-align:center">ç›¸é™¤åå†èµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">%=</td>
<td style="text-align:center">æ±‚ä½™åå†èµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">&laquo;=</td>
<td style="text-align:center">å·¦ç§»åèµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">&raquo;=</td>
<td style="text-align:center">å³ç§»åèµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">&amp;=</td>
<td style="text-align:center">æŒ‰ä½ä¸åèµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">|=</td>
<td style="text-align:center">æŒ‰ä½æˆ–åèµ‹å€¼</td>
</tr>
<tr>
<td style="text-align:center">^=</td>
<td style="text-align:center">æŒ‰ä½å¼‚æˆ–åèµ‹å€¼</td>
</tr>
</tbody>
</table>]]></content:encoded>
    </item>
    
  </channel>
</rss>
